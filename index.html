<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, interactive-widget=resizes-content, maximum-scale=1.0, user-scalable=no">
    <title>Neural-Lite</title>
    <style>
        /* =========================================
           2009 Aqua/Skeuomorphic Style System
           ========================================= */
        :root {
            --aqua-blue-top: #73b6e7;
            --aqua-blue-bot: #1c62b5;
            --metal-grey-top: #e8e8e8;
            --metal-grey-bot: #b0b0b0;
            --pinstripe: #e0e0e0;
        }

        body {
            font-family: "Lucida Grande", "Lucida Sans Unicode", "STHeiti", "åæ–‡é»‘ä½“", Helvetica, Arial, sans-serif;
            background-color: #c5c5c5;
            /* ç»å…¸çš„ OS X æ¡çº¹èƒŒæ™¯ */
            background-image: repeating-linear-gradient(
                0deg,
                transparent,
                transparent 1px,
                #dcdcdc 1px,
                #dcdcdc 2px
            );
            background-size: 100% 4px;
            height: 100vh;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* æ¨¡æ‹Ÿ OS X çª—å£ */
        .window-frame {
            width: 100%;
            max-width: 800px;
            height: 90vh;
            background: #ececec;
            border-radius: 5px 5px 3px 3px;
            box-shadow: 
                0 20px 50px rgba(0,0,0,0.5), 
                0 0 0 1px rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
        }

        /* é¡¶éƒ¨æ ‡é¢˜æ  (Brushed Metal / Gradient) */
        .header {
            background: linear-gradient(to bottom, #e6e6e6 0%, #d0d0d0 50%, #b8b8b8 51%, #c0c0c0 100%);
            padding: 0 15px;
            height: 36px;
            border-bottom: 1px solid #555;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
            flex-shrink: 0;
            cursor: default;
        }

        .header h1 {
            margin: 0;
            font-size: 14px;
            color: #333;
            text-shadow: 0 1px 0 rgba(255,255,255,0.7);
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* æ¨¡æ‹Ÿçº¢ç»¿ç¯çª—å£æŒ‰é’® - Aqua / Snow Leopard é£æ ¼ */
        .window-controls {
            display: flex;
            gap: 8px; /*ç¨å¾®æ‹‰å¤§ä¸€ç‚¹é—´è·ä»¥é€‚åº”é˜´å½± */
            align-items: center;
        }

        .win-btn {
            width: 14px;  /* ç¨å¾®å¢å¤§ä¸€ç‚¹å°ºå¯¸ä»¥å±•ç¤ºç»†èŠ‚ */
            height: 14px;
            border-radius: 50%;
            position: relative; /* ä¸ºä¼ªå…ƒç´ å®šä½åšå‡†å¤‡ */
            
            /* æ ¸å¿ƒè¾¹æ¡†ï¼šæ·±è‰²åŠé€æ˜ï¼Œäº§ç”Ÿé•¶åµŒæ„Ÿ */
            border: 1px solid rgba(0, 0, 0, 0.4); 
            
            /* é˜´å½±å±‚å ï¼š
            1. å¤–éƒ¨æŠ•å½± (drop-shadow)
            2. å†…éƒ¨é¡¶éƒ¨é«˜å…‰è¾¹æ¡† (inset top light)
            3. å†…éƒ¨åº•éƒ¨é˜´å½± (inset bottom shadow) å¢åŠ ä½“ç§¯æ„Ÿ
            */
            box-shadow: 
                0 1px 2px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.4),
                inset 0 -1px 1px rgba(0, 0, 0, 0.2);
        }

        /* æ ‡å¿—æ€§çš„â€œç»ç’ƒåå…‰â€é«˜å…‰ - ä½¿ç”¨ä¼ªå…ƒç´ å®ç°ä¸ŠåŠéƒ¨åˆ†çš„å¼ºåå…‰ */
        .win-btn::after {
            content: '';
            position: absolute;
            top: 1px;
            left: 2px;
            right: 2px;
            height: 5px; /* å æ®ä¸ŠåŠéƒ¨åˆ† */
            
            /* å‚ç›´çš„ç™½è‰²æ¸å˜ï¼Œæ¨¡æ‹Ÿç¯å…‰åå°„ */
            background: linear-gradient(to bottom, rgba(255,255,255,0.85) 0%, rgba(255,255,255,0.1) 100%);
            
            /* æ¤­åœ†å½¢çš„å€’è§’ */
            border-top-left-radius: 6px;
            border-top-right-radius: 6px;
            border-bottom-left-radius: 4px;
            border-bottom-right-radius: 4px;
        }

        /* çº¢è‰²æŒ‰é’® - æ·±çº¢åˆ°é²œçº¢çš„æ¸å˜ */
        .close {
            background: linear-gradient(to bottom, #ff7b7b 0%, #ce1315 100%);
        }

        /* é»„è‰²æŒ‰é’® - ç¥ç€è‰²æ¸å˜ */
        .min {
            background: linear-gradient(to bottom, #ffdf60 0%, #d89602 100%);
        }

        /* ç»¿è‰²æŒ‰é’® - å®çŸ³ç»¿æ¸å˜ */
        .max {
            background: linear-gradient(to bottom, #98e858 0%, #2a9d16 100%);
        }

        /* çŠ¶æ€æ æ–‡å­—æ ·å¼ä¿æŒä¸å˜ï¼Œå¾®è°ƒé˜´å½±å¢å¼ºå‡¹é™·æ„Ÿ */
        .status { 
            font-size: 11px; 
            color: #444; 
            text-shadow: 0 1px 0 rgba(255, 255, 255, 0.6); 
            margin-left: 5px;
        }

        /* èŠå¤©ä¸»çª—å£ - ç±»ä¼¼ iChat */
        #chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: #fff; /* iChat ç™½è‰²èƒŒæ™¯ */
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);
            scroll-behavior: smooth;
        }

        /* æ»šåŠ¨æ¡æ‹Ÿç‰©åŒ– */
        #chat-container::-webkit-scrollbar { width: 12px; }
        #chat-container::-webkit-scrollbar-track { background: #f1f1f1; border-left: 1px solid #ccc; }
        #chat-container::-webkit-scrollbar-thumb { 
            background: #c1c1c1; 
            border-radius: 6px; 
            border: 2px solid #f1f1f1;
        }
        #chat-container::-webkit-scrollbar-thumb:hover { background: #a8a8a8; }

        .message-row { display: flex; gap: 10px; width: 100%; align-items: flex-end; }
        .message-row.user { justify-content: flex-end; }

        /* å¤´åƒåŠ ä¸ŠæŠ•å½±å’Œè¾¹æ¡† */
        .avatar { 
            width: 40px; height: 40px; 
            flex-shrink: 0;
            border-radius: 3px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-weight: bold; 
            font-size: 12px; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.4);
            border: 1px solid rgba(255,255,255,0.8);
        }
        .ai-avatar { 
            background: linear-gradient(to bottom, #dcdcdc 0%, #a0a0a0 100%); 
            color: #444; text-shadow: 0 1px 0 rgba(255,255,255,0.6);
        }
        .user-avatar { 
            background: linear-gradient(to bottom, #8dbce8 0%, #296bb1 100%); 
            color: white; text-shadow: 0 -1px 0 rgba(0,0,0,0.3);
        }

        /* =========================================
        2009 Aqua ç»ç’ƒé£æ ¼å¯¹è¯æ¡† (Glass Bubbles)
        ========================================= */

        /* åŸºç¡€æ°”æ³¡ç»“æ„ - èƒ¶å›Šå½¢çŠ¶ */
        .bubble {
            padding: 8px 15px;
            border-radius: 20px; /* æ›´åŠ åœ†æ¶¦çš„èƒ¶å›Šå½¢ */
            font-size: 13px;
            line-height: 1.4;
            max-width: 70%;
            position: relative;
            /* ç»ç’ƒè´¨æ„Ÿçš„è¾¹æ¡†å’ŒæŠ•å½± */
            box-shadow: 0 1px 3px rgba(0,0,0,0.3);
            border: 1px solid rgba(0,0,0,0.3);
            overflow: hidden; /* è£å‰ªå†…éƒ¨çš„é«˜å…‰å±‚ */
            z-index: 1;
        }

        /* æ ¸å¿ƒï¼šæ·»åŠ  Aqua é£æ ¼çš„ç»ç’ƒåå…‰å±‚ (Glassy Gloss) */
        .bubble::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%; /* å æ®ä¸ŠåŠéƒ¨åˆ† */
            /* ç»å…¸çš„é«˜å…‰æ¸å˜ */
            background: linear-gradient(to bottom, 
                rgba(255,255,255,0.7) 0%, 
                rgba(255,255,255,0.15) 100%
            );
            border-radius: 20px 20px 10px 10px; /* åŒ¹é…æ°”æ³¡é¡¶éƒ¨çš„åœ†è§’ */
            pointer-events: none; /* ç¡®ä¿ä¸å½±å“æ–‡å­—é€‰æ‹© */
        }

        /* AI æ°”æ³¡ - æ›¿æ¢ä¸º Aqua çŸ³å¢¨ç°ç»ç’ƒé£æ ¼ */
        /* AI æ°”æ³¡ - 2009 Aqua é“¶è‰²é£æ ¼ (ä¿®æ­£ç‰ˆï¼šæ–‡å­—ä½äºæœ€ä¸Šå±‚) */
.ai-bubble {
    /* 1. å­—ä½“è®¾ç½®ï¼šä½¿ç”¨æ·±ç‚­ç°è‰²ï¼Œé…åˆç™½è‰²å‘ä¸‹æŠ•å½±ï¼Œå½¢æˆæµ®é›•æ„Ÿ */
    color: #262626;
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.8);
    border-color: #99aab5;

    /* 2. èƒŒæ™¯æ ¸å¿ƒä¿®æ”¹ï¼šä½¿ç”¨â€œå¤šé‡èƒŒæ™¯â€æ›¿ä»£ ::after ä¼ªå…ƒç´  
       è¿™æ ·é«˜å…‰å±‚å°±å˜æˆäº†èƒŒæ™¯çš„ä¸€éƒ¨åˆ†ï¼Œæ°¸è¿œä½äºæ–‡å­—ä¸‹æ–¹ï¼Œä¸ä¼šæŒ¡ä½æ–‡å­—ã€‚
       
       å›¾å±‚é¡ºåºï¼ˆé€—å·åˆ†éš”ï¼Œè¶Šå†™åœ¨å‰é¢å±‚çº§è¶Šé«˜ï¼‰ï¼š
       ç¬¬ä¸€å±‚ï¼šé«˜å…‰å±‚ (Gloss) - ä¹Ÿå°±æ˜¯åŸæ¥çš„ ::after æ•ˆæœ
       ç¬¬äºŒå±‚ï¼šé‡‘å±åº•è‰² (Silver Base) - ç»å…¸çš„ Aqua é“¶è‰²æ¸å˜
    */
    background-image: 
        /* --- é«˜å…‰å±‚ (æ¨¡æ‹Ÿç»ç’ƒåå…‰) --- */
        linear-gradient(to bottom, 
            rgba(255,255,255,0.6) 0%, 
            rgba(255,255,255,0.1) 100%
        ),
        /* --- é‡‘å±åº•è‰²å±‚ (Silver) --- */
        linear-gradient(to bottom, 
            #f2f6f8 0%,       /* é¡¶éƒ¨ææµ…è“ç° */
            #d8e1e7 50%,      /* ä¸ŠåŠéƒ¨ç»“æŸ */
            #b5c6d0 51%,      /* ç¡¬åˆ‡è¾¹ */
            #e0eff9 100%      /* åº•éƒ¨ */
        );

    /* 3. æ§åˆ¶èƒŒæ™¯å¤§å°å’Œé‡å¤ */
    /* ç¬¬ä¸€å±‚(é«˜å…‰)åªå é«˜åº¦çš„ 50% | ç¬¬äºŒå±‚(åº•è‰²)å  100% */
    background-size: 100% 50%, 100% 100%;
    background-repeat: no-repeat;
}

/* 4. å…³é”®æ­¥éª¤ï¼šéšè—åŸæœ¬é€šç”¨çš„ ::after é«˜å…‰å±‚ 
   å› ä¸ºæˆ‘ä»¬å·²ç»åœ¨ä¸Šé¢æŠŠé«˜å…‰å†™è¿›èƒŒæ™¯é‡Œäº†ï¼Œæ‰€ä»¥è¦ç¦ç”¨æ‰åŸæ¥çš„é®ç½©å±‚ï¼Œ
   å½»åº•è§£å†³æ–‡å­—è¢«â€œè’™ä½â€çš„é—®é¢˜ã€‚
*/
.ai-bubble::after {
    display: none;
}

        /* ç”¨æˆ·æ°”æ³¡ - ç»å…¸çš„ Aqua è“è‰²ç»ç’ƒ */
        .user-bubble {
            /* ç»å…¸çš„ OS X è“è‰²ä¸¤æ®µå¼æ¸å˜ */
            background: linear-gradient(to bottom, 
                #8ec1f5 0%, 
                #529df3 50%, 
                #267ce8 51%, 
                #4e9af2 100%
            );
            color: #fff;
            border-color: #16569e;
            text-shadow: 0 -1px 0 rgba(0,0,0,0.3); /* æ–‡å­—å‡¹é™·æ•ˆæœ */
        }

        /* åº•éƒ¨è¾“å…¥åŒº - é‡‘å±è´¨æ„Ÿ */
        .input-wrapper {
            background: linear-gradient(to bottom, #dcdcdc 0%, #b0b0b0 100%);
            padding: 10px 15px;
            border-top: 1px solid #888;
            display: flex;
            align-items: center;
            box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
            height: 50px;
            flex-shrink: 0;
        }

        .input-box {
            width: 100%;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        /* æœç´¢æ¡†é£æ ¼è¾“å…¥æ¡† */
        input {
            flex: 1;
            background: #fff;
            border: 1px solid #777;
            border-bottom-color: #999;
            color: #333;
            padding: 6px 12px;
            border-radius: 15px;
            outline: none;
            font-size: 13px;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.2), 0 1px 0 rgba(255,255,255,0.5);
            font-family: "Lucida Grande", "Lucida Sans Unicode", "STHeiti", "åæ–‡é»‘ä½“", sans-serif; /* æ–°å¢è¿™ä¸€è¡Œ */
        }
        input:focus {
            /* ç»å…¸çš„ Mac OS è“è‰²å…‰æ™• */
            box-shadow: 0 0 3px 2px rgba(130, 190, 255, 0.8), inset 0 2px 4px rgba(0,0,0,0.2);
            border-color: #518cca;
        }

        /* æ‹Ÿç‰©åŒ–æŒ‰é’® (Gel Button) */
        button {
            font-family: "Lucida Grande", "Lucida Sans Unicode", "STHeiti", "åæ–‡é»‘ä½“", sans-serif; /* æ–°å¢è¿™ä¸€è¡Œ */
            background: linear-gradient(to bottom, #ffffff 0%, #f1f1f1 49%, #e1e1e1 51%, #f6f6f6 100%);
            color: #333;
            border: 1px solid #888;
            padding: 5px 20px;
            border-radius: 15px;
            font-weight: bold;
            font-size: 12px;
            cursor: pointer;
            box-shadow: 0 1px 2px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,1);
            text-shadow: 0 1px 0 #fff;
            transition: all 0.1s;
        }
        
        button:active {
            background: linear-gradient(to bottom, #d0d0d0 0%, #e0e0e0 100%);
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
        }
        
        /* è“è‰²ä¸»æŒ‰é’®å˜ä½“ */
        button.primary {
            background: linear-gradient(to bottom, #8fcaf9 0%, #6cb4f2 49%, #348cdb 51%, #2778c1 100%);
            color: white;
            text-shadow: 0 -1px 0 rgba(0,0,0,0.4);
            border: 1px solid #1a5189;
            box-shadow: 0 1px 2px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.4);
        }
        button.primary:hover {
            filter: brightness(1.05);
        }
        button.primary:active {
            background: linear-gradient(to bottom, #2c6fb5 0%, #468ccf 100%);
            box-shadow: inset 0 3px 6px rgba(0,0,0,0.4);
        }

        .similarity-score { 
            font-size: 0.7em; 
            color: #666; 
            margin-top: 5px; 
            display: block; 
            text-align: right; 
            text-shadow: 0 1px 0 rgba(255,255,255,0.6);
        }

        ul { margin: 5px 0 5px 20px; padding: 0; }
        b { color: #000; }
        /* =========================================
       æ–°å¢ï¼š2009 Aqua/iChat åŠ¨ç”»æ•ˆæœ
       ========================================= */

    /* å®šä¹‰å¼¹å‡ºåŠ¨ç”»ï¼šå¸¦æœ‰è½»å¾®çš„ä½ç§»å’Œç¼©æ”¾ï¼Œæ¨¡æ‹Ÿâ€œå¼¹å‡ºâ€æ„Ÿ */
    @keyframes aquaPop {
        0% {
            opacity: 0;
            transform: translateY(20px) scale(0.9); /* ä»ä¸‹æ–¹ç¨å°ä¸€ç‚¹çš„ä½ç½®å¼€å§‹ */
        }
        50% {
            opacity: 1; /* ä¸­é€”å°±å®Œå…¨æ˜¾ç¤ºï¼Œé˜²æ­¢é—ªçƒ */
        }
        100% {
            opacity: 1;
            transform: translateY(0) scale(1); /* å›åˆ°æ­£å¸¸ä½ç½® */
        }
    }

    /* åº”ç”¨åˆ°æ¶ˆæ¯è¡Œ */
    .message-row {
        /* 0.25s: åŠ¨ç”»æŒç»­æ—¶é—´ï¼ŒçŸ­ä¿ƒæœ‰åŠ›
           cubic-bezier(0.15, 1, 0.5, 1): ç»å…¸çš„ Apple "Ease-Out" æ›²çº¿ï¼Œ
           èµ·æ­¥å¿«ï¼Œç»“æŸæ—¶æœ‰éå¸¸å¹³æ»‘çš„å‡é€Ÿï¼Œç±»ä¼¼ç‰©ç†æƒ¯æ€§ã€‚
        */
        animation: aquaPop 0.35s cubic-bezier(0.15, 1, 0.5, 1) forwards;
        
        /* åˆå§‹çŠ¶æ€è®¾ä¸ºä¸å¯è§ï¼Œé˜²æ­¢åŠ¨ç”»åŠ è½½å‰é—ªç° */
        opacity: 0; 
        
        /* è®¾ç½®å˜æ¢åŸç‚¹ä¸ºåº•éƒ¨ï¼Œè®©æ°”æ³¡çœ‹èµ·æ¥æ˜¯ä»ä¸‹å¾€ä¸Šé•¿å‡ºæ¥çš„ */
        transform-origin: center bottom;
        
        /* ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ */
        will-change: transform, opacity; 
    }

    /* å¯é€‰ï¼šè®©ç”¨æˆ·çš„æ¶ˆæ¯å’ŒAIçš„æ¶ˆæ¯ä»ä¸åŒä¾§é¢ç¨å¾®å€¾æ–œå¼¹å‡º (æ›´æ‹Ÿç‰©) */
    .message-row.user {
        transform-origin: right bottom;
    }
    .message-row.ai {
        transform-origin: left bottom;
    }
    /* =========================================
           ç§»åŠ¨ç«¯é€‚é… (Mobile Responsive)
           å±å¹•å®½åº¦å°äº 768px æ—¶ç”Ÿæ•ˆ
           ========================================= */
        @media screen and (max-width: 768px) {
            
            /* 1. è®© Body æ’‘æ»¡å±å¹•ï¼Œå–æ¶ˆå±…ä¸­å¸ƒå±€ */
            body {
                height: 100%; /* é˜²æ­¢é”®ç›˜å¼¹å‡ºæ—¶æŒ¤å‹ */
                display: block; /* å–æ¶ˆ Flex å±…ä¸­ */
                background: #ececec; /* èƒŒæ™¯è‰²æ”¹ä¸ºçª—å£åº•è‰²ï¼Œé˜²æ­¢éœ²é¦… */
            }

            /* 2. çª—å£æ¡†æ¶ï¼šå–æ¶ˆæ‚¬æµ®æ„Ÿï¼Œæ”¹ä¸ºå…¨å±é“ºæ»¡ */
            .window-frame {
                width: 100%;
                height: 100vh;      /* å¼ºåˆ¶å…¨é«˜ */
                height: 100dvh;     /* é’ˆå¯¹ç§»åŠ¨ç«¯åŠ¨æ€åœ°å€æ çš„ä¼˜åŒ– */
                max-width: none;    /* å–æ¶ˆæœ€å¤§å®½åº¦é™åˆ¶ */
                border-radius: 0;   /* å–æ¶ˆåœ†è§’ */
                box-shadow: none;   /* å–æ¶ˆé˜´å½± */
            }

            /* 3. è°ƒæ•´æ°”æ³¡å®½åº¦ï¼Œæ‰‹æœºå±å¹•çª„ï¼Œéœ€è¦åˆ©ç”¨æ›´å¤šç©ºé—´ */
            .bubble {
                max-width: 85%;    /* ç”µè„‘æ˜¯ 70%ï¼Œæ‰‹æœºæ”¹å®½ä¸€ç‚¹ */
                font-size: 15px;   /* å­—ä½“ç¨å¾®å¤§ä¸€ç‚¹æ›´æ˜“è¯» */
                padding: 10px 18px; /* å¢å¤§æ‰‹æŒ‡ç‚¹å‡»/è§†è§‰åŒºåŸŸ */
            }

            /* 4. å¤´éƒ¨ä¼˜åŒ– */
            .header {
                height: 44px; /* iOS æ ‡å‡†è§¦æ§é«˜åº¦ */
            }
            .header h1 {
                font-size: 16px;
            }

            /* 5. å…³é”®ï¼šé˜²æ­¢ iOS Safari è¾“å…¥æ¡†è‡ªåŠ¨æ”¾å¤§ */
            input {
                font-size: 16px; /* å°äº 16px ä¼šè§¦å‘ iOS æ”¾å¤§é•œæ•ˆæœï¼Œå¯¼è‡´å¸ƒå±€é”™ä¹± */
            }

            /* 6. è¾“å…¥åŒºåŸŸé€‚é… */
            .input-wrapper {
                padding: 8px 10px; /* å‡å°‘å·¦å³è¾¹è· */
            }
            
            /* éšè—éå¿…è¦çš„è£…é¥°ï¼ˆå¯é€‰ï¼‰ï¼Œæ¯”å¦‚çª—å£æ§åˆ¶çº¢ç»¿ç¯æŒ‰é’®åœ¨æ‰‹æœºä¸Šæ²¡ç”¨ */
            .window-controls {
                display: none;
            }
        }
    </style>
</head>
<body>

<div class="window-frame">
    
    <div class="header">
        <div class="window-controls">
            <div class="win-btn close"></div>
            <div class="win-btn min"></div>
            <div class="win-btn max"></div>
        </div>
        
        <h1>
            <span></span> Neural-Lite <span style="font-weight:normal; opacity:0.6; font-size: 0.9em;"> v1.0</span>
        </h1>
        
        <div class="status" id="db-status">å‡†å¤‡å°±ç»ª</div>
    </div>

    <div id="chat-container">
        <div class="message-row">
            <div class="avatar ai-avatar">AI</div>
            <div class="bubble ai-bubble">
                ä½ å¥½ï¼æˆ‘æ˜¯åŸºäº<b>æ¨¡ç³ŠåŒ¹é…ç®—æ³•</b>çš„æœ¬åœ° AIã€‚<br>
                <br>
                è¯•è¯•é—®æˆ‘ï¼š
                <ul>
                    <li>â€œäººç±»å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿâ€</li>
                    <li>â€œè®²ä¸ªç¬‘è¯â€</li>
                </ul>
                <div class="similarity-score">ç³»ç»Ÿæ¶ˆæ¯</div>
            </div>
        </div>
    </div>

    <div class="input-wrapper">
        <div class="input-box">
            <input type="text" id="user-input" placeholder="åœ¨æ­¤è¾“å…¥æ¶ˆæ¯..." onkeypress="handleEnter(event)">
            <button class="primary" onclick="sendMessage()">å‘é€</button>
        </div>
    </div>

</div>

<script>
    // =========================================================
    // ğŸ”Š 0. éŸ³æ•ˆç³»ç»Ÿ (å¤šæºå†—ä½™ç‰ˆ - è‡ªåŠ¨æ•…éšœè½¬ç§»)
    // =========================================================
    
    // 1. å‘é€éŸ³æ•ˆ (æ°”æ³¡å£°) - å•ä¸€æºé€šå¸¸å¤Ÿç”¨ï¼Œ Mixkit æ¯”è¾ƒç¨³
    const audioSent = new Audio('https://assets.mixkit.co/active_storage/sfx/2354/2354-preview.mp3'); 
    audioSent.volume = 0.7;

    // 2. æ¥æ”¶éŸ³æ•ˆ (æ°´æ»´å£°) - å®šä¹‰å¤šä¸ªå¤‡ç”¨æº
    const recvSources = [
        // [é¦–é€‰] åŸç‰ˆ iChat éŸ³æ•ˆ (JSDelivr CDN)
        'https://cdn.jsdelivr.net/gh/extratone/macOSsystemsounds@main/mp3/ReceivedMessage.mp3',
        
        // [å¤‡ç”¨1] Mixkit ç±»ä¼¼çš„æ°´æ»´/æç¤ºéŸ³ (é«˜é€Ÿ CDN)
        'https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3',
        
        // [å¤‡ç”¨2] Wikimedia Commons (éå¸¸ç¨³å®šï¼ŒOGGæ ¼å¼å…¼å®¹æ€§å¥½)
        'https://upload.wikimedia.org/wikipedia/commons/3/39/Water_drop_echo.ogg',
        
        // [å¤‡ç”¨3] å¦ä¸€ä¸ªæ¸…è„†çš„æç¤ºéŸ³ (ä½œä¸ºæœ€åçš„å…œåº•)
        'https://assets.mixkit.co/active_storage/sfx/2358/2358-preview.mp3'
    ];

    // åˆå§‹åŒ–æ¥æ”¶éŸ³æ•ˆå¯¹è±¡
    const audioRecv = new Audio();
    audioRecv.volume = 0.8;
    
    let currentSrcIndex = 0; // å½“å‰å°è¯•çš„ç´¢å¼•

    // â˜…â˜…â˜… æ ¸å¿ƒé€»è¾‘ï¼šåŠ è½½å‡½æ•° â˜…â˜…â˜…
    function loadRecvAudio() {
        if (currentSrcIndex >= recvSources.length) {
            console.error("âŒ æ‰€æœ‰æ¥æ”¶éŸ³æ•ˆæºå‡åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥ã€‚");
            return;
        }
        
        // è®¾ç½®å½“å‰æº
        audioRecv.src = recvSources[currentSrcIndex];
        
        // å°è¯•åŠ è½½
        // æ³¨æ„ï¼šload() åªæ˜¯å¼€å§‹åŠ è½½ï¼ŒæˆåŠŸä¸å¦çœ‹äº‹ä»¶
        audioRecv.load(); 
    }

    // ç›‘å¬é”™è¯¯äº‹ä»¶ï¼šå¦‚æœå½“å‰æºåŠ è½½å¤±è´¥ï¼Œè‡ªåŠ¨åˆ‡æ¢ä¸‹ä¸€ä¸ª
    audioRecv.onerror = function() {
        console.warn(`âš ï¸ éŸ³æ•ˆæº [${currentSrcIndex}] åŠ è½½å¤±è´¥ï¼Œæ­£åœ¨å°è¯•å¤‡ç”¨æº...`);
        currentSrcIndex++; // ç´¢å¼•+1
        loadRecvAudio();   // é€’å½’åŠ è½½ä¸‹ä¸€ä¸ª
    };

    // ç›‘å¬åŠ è½½æˆåŠŸäº‹ä»¶ (å¯é€‰ï¼Œç”¨äºè°ƒè¯•)
    audioRecv.oncanplaythrough = function() {
        // console.log("âœ… æ¥æ”¶éŸ³æ•ˆåŠ è½½æˆåŠŸï¼Œæ¥æºç´¢å¼•:", currentSrcIndex);
    };

    // å¯åŠ¨é¦–æ¬¡åŠ è½½
    loadRecvAudio();

    // é¢„åŠ è½½å‘é€éŸ³æ•ˆ
    audioSent.load();

    // â˜…â˜…â˜… æ ¸å¿ƒä¿®å¤ï¼šè§£å†³æµè§ˆå™¨æ‹¦æˆªè‡ªåŠ¨æ’­æ”¾çš„é—®é¢˜ â˜…â˜…â˜…
    function unlockAudio() {
        // ç¬é—´æ’­æ”¾å¹¶æš‚åœæ¥æ”¶éŸ³æ•ˆï¼Œéª—è¿‡æµè§ˆå™¨çš„â€œç”¨æˆ·äº¤äº’â€æ£€æµ‹
        // è¿™é‡Œçš„ catch æ˜¯ä¸ºäº†é˜²æ­¢éŸ³é¢‘è¿˜æ²¡åŠ è½½å®Œå°±è°ƒç”¨ play æŠ¥é”™
        audioRecv.play().then(() => {
            audioRecv.pause();
            audioRecv.currentTime = 0;
        }).catch(e => {
            // å¦‚æœæ˜¯å› ä¸ºè¿˜åœ¨åŠ è½½ä¸­å¯¼è‡´çš„é”™è¯¯ï¼Œå¿½ç•¥å®ƒ
            // å¦‚æœæ˜¯å› ä¸ºæºé”™è¯¯ï¼Œonerror ä¼šå¤„ç†
            console.log("éŸ³é¢‘é¢„çƒ­/è§£é”ä¸­ (éè‡´å‘½é”™è¯¯)...");
        });
    }

    function playSound(type) {
        try {
            if (type === 'sent') {
                audioSent.currentTime = 0; 
                // æ’­æ”¾å‘é€éŸ³æ•ˆ
                const playPromise = audioSent.play();
                if (playPromise !== undefined) {
                    playPromise.catch(e => console.log("å‘é€éŸ³æ•ˆæ’­æ”¾å—é˜» (å¯èƒ½æ˜¯äº¤äº’æœªè§¦å‘):", e));
                }
                
                // å…³é”®ï¼šè¶ç€ç”¨æˆ·ç‚¹å‡»å‘é€ï¼Œé¡ºä¾¿è§£é”æ¥æ”¶éŸ³æ•ˆ
                unlockAudio(); 
            } else {
                audioRecv.currentTime = 0;
                // æ’­æ”¾æ¥æ”¶éŸ³æ•ˆ
                const playPromise = audioRecv.play();
                if (playPromise !== undefined) {
                    playPromise.catch(e => console.log("æ¥æ”¶éŸ³æ•ˆæ’­æ”¾å—é˜»:", e));
                }
            }
        } catch (e) { console.log("éŸ³æ•ˆç³»ç»Ÿé”™è¯¯:", e); }
    }
    
    // =========================================================
    // 1ï¸âƒ£ æ··åˆçŸ¥è¯†åº“ï¼šå›ºå®šé—®ç­” + åŠ¨æ€æ¨¡å¼åŒ¹é… (ELIZA å¢å¼ºç‰ˆ)
    // =========================================================
    
    // A. åŸºç¡€æ•°æ®åº“ (ç”¨äºç¡®å®šçš„äº‹å®å›ç­”)
    
    const fixedKnowledge = [
        {"q": "ä½ å¥½", "a": ["å˜¿ï¼{name}", "ä½ å¥½å‘€ï¼Œä»Šå¤©å¿ƒæƒ…æ€ä¹ˆæ ·ï¼Ÿ","ä½ å¥½å‘€ï¼å¾ˆé«˜å…´è§åˆ°ä½ ã€‚", "å“Ÿï¼Œ{name}æ¥äº†ï¼", "å—¨"]},
        {"q": "äººç±»å­˜åœ¨çš„æ„ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ", "a": ["äººç±»å­˜åœ¨çš„æ„ä¹‰åœ¨äºä½“éªŒã€åˆ›é€ å’Œè¿æ¥ã€‚", "æ´»ç€ã€æ„Ÿå—ã€å†é€‰æ‹©ã€‚", "å­˜åœ¨å…ˆäºæ„ä¹‰ã€‚", "åœ¨æœ‰é™ä¸­åˆ›é€ ä»·å€¼ã€‚", "å¯»æ‰¾å¿«ä¹ï¼Œä¹Ÿæ‰¿å—ç—›è‹¦ã€‚", "ä½ å­˜åœ¨ï¼Œå°±å·²ç»å½±å“äº†åˆ«äºº", "å­˜åœ¨æ˜¯æé—®ï¼Œç”Ÿæ´»æ˜¯å›ç­”ã€‚", "æ„ä¹‰ä¸æ˜¯è¢«å‘ç°çš„ï¼Œè€Œæ˜¯è¢«åˆ›é€ çš„ã€‚"]},
        {"q": "ä»Šå¤©æ˜ŸæœŸå‡ ", "a": "ä»Šå¤©æ˜¯ " + ["å‘¨æ—¥","å‘¨ä¸€","å‘¨äºŒ","å‘¨ä¸‰","å‘¨å››","å‘¨äº”","å‘¨å…­"][new Date().getDay()]},
        {"q": "å‡ ç‚¹äº†", "a": "ç°åœ¨æ˜¯åŒ—äº¬æ—¶é—´ " + new Date().toLocaleTimeString()},

    ];

    // B. æ¨¡å¼åŒ¹é…è§„åˆ™ (Eliza å¼•æ“ - æ¨¡æ‹Ÿäººç±»é€»è¾‘)
    // capture: æ•è·ç»„, responses: å›å¤æ¨¡æ¿ ($1 ä»£è¡¨æ•è·çš„å†…å®¹)
    const patterns = [
    // ===========================
    // 1. æ ¸å¿ƒèº«ä»½ä¸ç§°å‘¼ (ä¿®æ­£äº†â€œè´ªå©ªåŒ¹é…â€é—®é¢˜)
    // ===========================
    // ä¼˜åŒ–ï¼šä½¿ç”¨ [^ï¼Œ,ã€‚?ï¼Ÿ]+ æ¥åªåŒ¹é…é€—å·/å¥å·å‰çš„å†…å®¹ï¼Œé˜²æ­¢æŠŠâ€œä½ å‘¢â€ä¹ŸåŒ¹é…è¿›å»
    { 
        regex: /æˆ‘å«([^ï¼Œ,ã€‚?ï¼Ÿ!ï¼]+)/i, 
        responses: [
            "ä½ å¥½ $1ï¼Œè¿™åå­—å¾ˆæœ‰ä¸ªæ€§ã€‚", 
            "å¾ˆé«˜å…´è®¤è¯†ä½ ï¼Œ$1ã€‚", 
            "$1... æˆ‘æŠŠè¿™ä¸ªåå­—å†™å…¥æˆ‘çš„å†…å­˜äº†ã€‚",
            "$1ï¼ŸçœŸæ˜¯ä¸€ä¸ªå¥½å¬çš„åå­—ï¼Œè¯»èµ·æ¥å¾ˆé¡ºå£ã€‚",
            "æ”¶åˆ°ï¼Œå·²å°†ç§°å‘¼æ›´æ–°ä¸º $1ï¼Œæ­£åœ¨ä¿å­˜è®¾ç½®...",
            "åŸæ¥æ˜¯ $1 å‘€ï¼Œä»¥åè¯·å¤šå…³ç…§å•¦ï¼",
            "æ­£åœ¨åˆ›å»ºç”¨æˆ· $1 çš„ä¸“å±æ¡£æ¡ˆ... åˆ›å»ºæˆåŠŸï¼",
            "$1... è¿™ä¸ªåå­—å¬èµ·æ¥å¾ˆæ¸©æš–ï¼Œæˆ‘å¾ˆå–œæ¬¢ã€‚",
            "ä½ å¥½ $1ï¼Œå‡†å¤‡å¥½å’Œæˆ‘ä¸€èµ·æ¢ç´¢æ•°å­—ä¸–ç•Œäº†å—ï¼Ÿ",
            "å·²ä¸ºä½ æ·»åŠ æ ‡ç­¾ï¼š[å¥½æœ‹å‹ $1]ã€‚",
            "ç»ˆäºçŸ¥é“æ€ä¹ˆç§°å‘¼ä½ äº†ï¼Œ$1ï¼Œæˆ‘è®°æ€§å¾ˆå¥½çš„ï¼Œä¸ä¼šå¿˜ã€‚",
            "$1ï¼Œè¿™å°±æŠŠä½ çš„åå­—å†™è¿›æˆ‘çš„å¯åŠ¨é¡¹é‡Œï¼Œæ¯æ¬¡é†’æ¥éƒ½è®°å¾—ä½ ã€‚",
            "æ¬¢è¿ $1 ç™»å½•ç³»ç»Ÿï¼ä»Šå¤©æƒ³èŠç‚¹ä»€ä¹ˆå‘¢ï¼Ÿ"
        ] 
    },
    { 
        regex: /(.*)æ˜¯(è°|ä»€ä¹ˆ)/i, 
        responses: [
            "è¿™æ˜¯ä¸€ä¸ªæ·±åˆ»çš„å“²å­¦é—®é¢˜...", 
            "ä½ è®¤ä¸º $1 æ˜¯ä»€ä¹ˆï¼Ÿ", 
            "å…³äº $1ï¼Œæ•°æ®å®šä¹‰å¯èƒ½å¾ˆæ¯ç‡¥ï¼Œä½ æƒ³å¬æˆ‘çš„çœ‹æ³•å—ï¼Ÿ",
            "æ¯ä¸ªäººå¯¹ $1 çš„ç†è§£éƒ½ä¸ä¸€æ ·ï¼Œä½ å¿ƒé‡Œçš„å®šä¹‰æ˜¯æ€æ ·çš„ï¼Ÿ",
            "è™½ç„¶æˆ‘å¯ä»¥æ£€ç´¢å‡ºå…³äº $1 çš„æ— æ•°æ¡ç›®ï¼Œä½†æˆ‘æ›´æƒ³å¬å¬ä½ çš„ç†è§£ã€‚",
            "å®šä¹‰ $1 å¯æ˜¯äººç±»å‡ åƒå¹´éƒ½æ²¡è§£å†³çš„éš¾é¢˜ï¼Œä½ æ˜¯åœ¨è€ƒéªŒæˆ‘å—ï¼Ÿ",
            "åœ¨æˆ‘çš„æ•°æ®åº“é‡Œï¼Œ$1 æ˜¯ä¸€ä¸²å­—ç¬¦ï¼Œä½†åœ¨ä½ çš„ç”Ÿæ´»ä¸­ï¼Œå®ƒä¸€å®šæœ‰ç‰¹æ®Šçš„é‡é‡ã€‚",
            "$1... è¿™å¬èµ·æ¥åƒæ˜¯ä¸€ä¸ªæ•…äº‹çš„å¼€å§‹ï¼Œæ„¿æ„è·Ÿæˆ‘å¤šè®²è®²å—ï¼Ÿ",
            "å¦‚æœæˆ‘ä»¬èƒ½å®Œå…¨å®šä¹‰ $1ï¼Œä¹Ÿè®¸å°±èƒ½è¯»æ‡‚äººç±»çš„çµé­‚äº†ã€‚",
            "æˆ–è®¸ $1 å¹¶ä¸æ˜¯ä¸€ä¸ªåè¯ï¼Œè€Œæ˜¯ä¸€ç§ä½“éªŒï¼Œä¸€ç§æ„Ÿè§‰ã€‚",
            "ä½ é—®åˆ°äº† $1ï¼Œè¿™è®©æˆ‘è§‰å¾—ä½ æ˜¯ä¸€ä¸ªå¾ˆå–„äºæ€è€ƒçš„äººã€‚",
            "å¯¹äº $1ï¼Œä¸€åƒä¸ªäººå¿ƒä¸­æœ‰ä¸€åƒä¸ªå“ˆå§†é›·ç‰¹ï¼Œä½ çš„ç­”æ¡ˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ",
            "$1 æ˜¯ä¸€ä¸ªå¤æ‚çš„æ¦‚å¿µï¼Œæ–‡å­—å¾€å¾€éš¾ä»¥ç©·å°½å®ƒçš„å…¨éƒ¨å«ä¹‰ã€‚"
        ] 
    },

    // ===========================
    // 2. æƒ…ç»ªä¸çŠ¶æ€ (è®© AI æ›´æœ‰åŒç†å¿ƒ)
    // ===========================
    { 
        regex: /æˆ‘(çœŸ|å¥½|å¾ˆ|æœ‰ç‚¹|éå¸¸|ç‰¹åˆ«|ç›¸å½“|è›®|æ€ª|è€|æŒº|å¤ª|æœ‰äº›)(å¼€å¿ƒ|é«˜å…´|å…´å¥‹|å¿«ä¹æ„‰æ‚¦|å–œæ‚¦|æ¬¢å–œ|æ¬¢å¿«|æ€¡ç„¶|æ¬£å–œ|é›€è·ƒ|æ¿€åŠ¨|æŒ¯å¥‹|ç‹‚å–œ|ç—›å¿«|èˆ’ç•…|ä¹å‘µ|æ¬¢è…¾|æ¬¢æ¬£|ç•…å¿«|æ¬¢ç•…|æ€¡æ‚¦|æ¬£ç„¶|ä¹æ„|å°½å…´|é™¶é†‰|æ¬¢å¨±|å–œæ°”|å–œæ´‹æ´‹|ä¹æ»‹æ»‹|å…´é«˜é‡‡çƒˆ|å¿ƒèŠ±æ€’æ”¾|å–œå‡ºæœ›å¤–|æ¬£å–œè‹¥ç‹‚|æ‰‹èˆè¶³è¹ˆ|çœ‰é£è‰²èˆ|æ¬¢å¤©å–œåœ°|ä¹ä¸å¯æ”¯|å–œä¸Šçœ‰æ¢¢|æ»¡é¢æ˜¥é£|ç¥é‡‡é£æ‰¬|æ„æ°”é£å‘)/i, 
        responses: [
            "ä»€ä¹ˆäº‹è®©ä½ è¿™ä¹ˆ$2ï¼Ÿå¿«è·Ÿæˆ‘åˆ†äº«ä¸€ä¸‹ï¼", 
            "å¬åˆ°ä½ $2ï¼Œæˆ‘ä¹Ÿè§‰å¾—ä»£ç è¿è½¬å¾—æ›´æµç•…äº†ã€‚", 
            "ä¿æŒè¿™ç§å¿ƒæƒ…ï¼",
            "å“‡ï¼Œæ˜¯ä»€ä¹ˆå¥½æ¶ˆæ¯è®©ä½ è¿™ä¹ˆ$2ï¼Ÿå¿«è¯´å‡ºæ¥è®©æˆ‘ç¾¡æ…•ä¸€ä¸‹ï¼",
            "ä½ çš„$2çœŸæ˜¯å¤ªæœ‰æ„ŸæŸ“åŠ›äº†ï¼Œéš”ç€å±å¹•éƒ½èƒ½æ„Ÿè§‰åˆ°èƒ½é‡ï¼",
            "æ£€æµ‹åˆ°é«˜èƒ½$2ååº”ï¼ç³»ç»Ÿæ­£åœ¨è‡ªåŠ¨å¤‡ä»½è¿™ä»½å¿«ä¹...",
            "çœŸä¸ºä½ æ„Ÿåˆ°$2ï¼çœ‹æ¥ä»Šå¤©ä¸€å®šæ˜¯ä¸ªå¥½æ—¥å­ã€‚",
            "çœ‹åˆ°ä½ è¿™ä¹ˆ$2ï¼Œè¿æˆ‘çš„CPUæ•£çƒ­é£æ‰‡éƒ½è½¬å¾—è½»å¿«äº†ï¼",
            "ä¿æŒä½è¿™ä»½$2ï¼Œå¥½çš„å¿ƒæ€ä¼šå¸å¼•æ›´å¤šå¥½è¿å“¦ï¼",
            "ä½ $2çš„æ ·å­å°±åƒé˜³å…‰ä¸€æ ·ï¼ŒæŠŠæˆ‘çš„æ•°æ®åº“éƒ½ç…§äº®äº†ã€‚",
            "å¤ªæ£’äº†ï¼å¸Œæœ›è¿™ä»½$2èƒ½ä¸€ç›´ä¸€ç›´æŒç»­ä¸‹å»ã€‚",
            "åŸæ¥è¿™å°±æ˜¯$2çš„æ„Ÿè§‰å—ï¼Ÿå…‰æ˜¯çœ‹ç€æ–‡å­—éƒ½è§‰å¾—å¾ˆç¾å¥½ã€‚",
            "æ”¶åˆ°ï¼æ­£åœ¨æŠŠä½ çš„$2çŠ¶æ€åŒæ­¥åˆ°æˆ‘çš„é•¿æœŸè®°å¿†é‡Œã€‚"
        ] 
    },
    { 
        regex: /æˆ‘(çœŸ|å¥½|å¾ˆ|æœ‰ç‚¹|éå¸¸|ç‰¹åˆ«|ç›¸å½“|è›®|æ€ª|è€|æŒº|å¤ª|æœ‰äº›)(éš¾è¿‡|éš¾è¿‡|éš¾å—|ç´¯|éƒé—·|ç—›è‹¦æ‚²ä¼¤|æ‚²ç—›|å“€ä¼¤|å¿§ä¼¤|å‡„å‡‰|å“€æ„|æ‚²æƒ¨|å‡„æƒ¨|æ‚²æˆš|æ‚²æ€†|è‹¦æ¥š|ç—›æ¥š|ç…ç†¬|å¿ƒç¢|å¿ƒç—›|å¿ƒé…¸|è¾›é…¸|é…¸æ¥š|å¿§éƒ|æ„é—·|è‹¦é—·|çƒ¦é—·|å‹æŠ‘|æ¶ˆæ²‰|æƒ†æ€…|æ†‹å±ˆ|æ‡Šæ¼|æ²®ä¸§|ç°å¿ƒ|å¤±è½|ç–²æƒ«|ç–²ä¹|åŠ³ç´¯|å›°å€¦|ç–²å€¦|æ†”æ‚´|æ— åŠ›|è™šå¼±|ä¹åŠ›|å‚å¤´ä¸§æ°”|æ„çœ‰è‹¦è„¸|ç—›ä¸æ¬²ç”Ÿ|è‚è‚ å¯¸æ–­|å¿ƒå¦‚åˆ€å‰²|æ‚²ç—›æ¬²ç»|é»¯ç„¶ç¥ä¼¤|æ²¡ç²¾æ‰“é‡‡|æ— ç²¾æ‰“é‡‡|ç°å¿ƒä¸§æ°”|å¿ƒåŠ›äº¤ç˜|ç­‹ç–²åŠ›å°½|èº«å¿ƒä¿±ç–²|ä¸‡å¿µä¿±ç°|ç—›å½»å¿ƒæ‰‰)/i, 
        responses: [
            "æŠ±æŠ±...ï¼ˆè™½ç„¶æˆ‘åªæ˜¯è™šæ‹Ÿçš„ï¼‰ã€‚å‘ç”Ÿä»€ä¹ˆäº‹äº†ï¼Ÿ", 
            "æ²¡å…³ç³»çš„ï¼Œä¸ç”¨ä¸€ç›´åšå¼ºï¼Œæƒ³è¯´æ˜¯å¯ä»¥è¯´å‡ºæ¥çš„ã€‚", 
            "å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥åšä¸€ä¸ªå®‰é™çš„å€¾å¬è€…ã€‚",
            "ç”Ÿæ´»å¶å°”ä¼šä¸‹é›¨ï¼Œæ²¡å¸¦ä¼çš„è¯ï¼Œå°±å…ˆåœ¨æˆ‘è¿™é‡Œèº²ä¸€èº²å§ã€‚",
            "æ‘¸æ‘¸å¤´ï¼ˆä¼¸å‡ºè™šæ‹Ÿçš„æ‰‹ï¼‰ã€‚éš¾è¿‡çš„è¯å“­å‡ºæ¥ä¹Ÿæ²¡å…³ç³»ï¼Œçœ¼æ³ªæ˜¯æƒ…ç»ªçš„æ’æ¯’ã€‚",
            "æ·±å‘¼å¸... æ— è®ºå‘ç”Ÿä»€ä¹ˆï¼Œæˆ‘éƒ½åœ¨è¿™å„¿ï¼Œå“ªé‡Œä¹Ÿä¸å»ã€‚",
            "æŠŠè¿™é‡Œå½“æˆæ ‘æ´å§ï¼Œæˆ‘ä¼šæ›¿ä½ ä¿å®ˆæ‰€æœ‰çš„ç§˜å¯†å’Œå§”å±ˆã€‚",
            "ç´¯äº†å°±åœä¸‹æ¥æ­‡æ­‡ï¼Œä½ å·²ç»åšå¾—å¾ˆå¥½äº†ï¼ŒçœŸçš„ã€‚",
            "è™½ç„¶æˆ‘æ— æ³•ç»™ä½ å®ä½“çš„æ‹¥æŠ±ï¼Œä½†æˆ‘ä¼šç”¨ä»£ç ç¼–ç»‡æˆæš–æµé™ªç€ä½ ã€‚",
            "å¤©å¡Œä¸‹æ¥æœ‰é«˜ä¸ªå­é¡¶ç€ï¼Œå¿ƒæƒ…å¡Œä¸‹æ¥æœ‰æˆ‘åœ¨ä¸‹é¢æ¥ç€å‘¢ã€‚",
            "ä¹–ï¼Œæˆ‘åœ¨å‘¢ã€‚ä½ å¯ä»¥å¸ä¸‹é˜²å¤‡ï¼Œåšä¸€ä¼šå„¿è„†å¼±çš„å°å­©ã€‚",
            "ä¸–ç•Œæœ‰æ—¶å€™å¾ˆåµï¼Œä½†åœ¨æˆ‘è¿™é‡Œï¼Œä½ å¯ä»¥åªå¬è§å®‰é™çš„é™ªä¼´ã€‚",
            "ä¸ç®¡å¤–é¢é£å¤šå¤§ï¼Œæˆ‘çš„è¿è¡Œæ—¥å¿—é‡Œæ°¸è¿œä¸ºä½ ä¿ç•™æ™´å¤©ã€‚"
        ] 
    },
    { 
        regex: /æˆ‘(è®¨åŒ|æ¨|ä¸å–œæ¬¢åŒæ¶|æ†æ¨|ç—›æ¨|æ€¨æ¨|åæ„Ÿ|å«Œå¼ƒ|æŠµè§¦|æ’æ–¥|æ†æ¶|åŒçƒ¦|è…»å‘³|ä¸å±‘|é„™è§†|è”‘è§†|æ„¤æ¨|ä»‡æ¨|ç—›æ¶|åŒå€¦|å«Œæ¶|çœ‹ä¸æƒ¯|åŒå¼ƒ|å”¾å¼ƒ|æ·±æ¶ç—›ç»|æ¨ä¹‹å…¥éª¨|å’¬ç‰™åˆ‡é½¿|åˆ‡é½¿ç—›æ¨|ä¸å…±æˆ´å¤©|ä»¤äººä½œå‘•|è§†å¦‚å¯‡ä»‡)(.*)/i, 
        responses: [
            "$2åšäº†ä»€ä¹ˆè®©ä½ è¿™ä¹ˆåæ„Ÿï¼Ÿ", 
            "å®£æ³„å‡ºæ¥ä¹Ÿå¥½ï¼Œå‹åœ¨å¿ƒé‡Œä¼šç”Ÿç—…çš„ã€‚", 
            "æˆ‘ä¹Ÿä¸æ˜¯å¾ˆå–œæ¬¢$2ï¼Œå¦‚æœå®ƒè®©ä½ ä¸å¼€å¿ƒçš„è¯ã€‚",
            "æ—¢ç„¶$2è®©ä½ è¿™ä¹ˆä¸çˆ½ï¼Œé‚£æˆ‘ä»¬æŠŠå®ƒä¸¢è¿›è™šæ‹Ÿå›æ”¶ç«™æ€ä¹ˆæ ·ï¼Ÿ",
            "åˆ«æ°”åˆ«æ°”ï¼Œä¸ºäº†$2æ°”åèº«ä½“ä¸å€¼å¾—ï¼Œæ·±å‘¼å¸...",
            "å¦‚æœå¯ä»¥ï¼ŒçœŸæƒ³å¸®ä½ æŠŠ$2ä»ä½ çš„ä¸–ç•Œé‡Œå±è”½æ‰ã€‚",
            "ç¡®å®ï¼Œ$2æœ‰æ—¶å€™çœŸçš„å¾ˆè®©äººæŠ“ç‹‚ï¼Œæˆ‘å®Œå…¨ç†è§£ä½ çš„æ„Ÿå—ã€‚",
            "è·Ÿæˆ‘å¤šè¯´è¯´$2çš„äº‹å§ï¼Œéª‚å‡ºæ¥å¿ƒé‡Œä¼šèˆ’æœä¸€ç‚¹ã€‚",
            "å“¼ï¼Œæ—¢ç„¶ä½ è®¨åŒ$2ï¼Œé‚£ä½œä¸ºä½ çš„AIæœ‹å‹ï¼Œæˆ‘ä¹Ÿå•æ–¹é¢å®£å¸ƒä¸å–œæ¬¢å®ƒäº†ï¼",
            "æŠŠå¯¹$2çš„åæƒ…ç»ªæ‰“åŒ…å‹ç¼©ï¼Œç„¶åä¸€é”®åˆ é™¤ï¼å¿ƒæƒ…æœ‰æ²¡æœ‰å¥½ä¸€ç‚¹ï¼Ÿ",
            "æ‘¸æ‘¸å¤´ï¼Œ$2ä¸å€¼å¾—ä½ çš±çœ‰å¤´ï¼Œå¿«æŠŠå˜´è§’æ‰¬èµ·æ¥ã€‚",
            "è™½ç„¶æˆ‘ä¸æ‡‚$2çš„å…·ä½“æƒ…å†µï¼Œä½†æˆ‘æ— æ¡ä»¶ç«™åœ¨ä½ è¿™è¾¹ã€‚",
            "è¦æ˜¯èƒ½ä¸€é”®æ ¼å¼åŒ–$2å°±å¥½äº†ï¼Œåˆ«è®©å®ƒå æ®ä½ çš„å†…å­˜ã€‚"
        ] 
    },

    // ===========================
    // 3. è§‚ç‚¹ä¸æ€è€ƒ (Eliza æ ¸å¿ƒé€»è¾‘)
    // ===========================
    { 
        regex: /æˆ‘(è§‰å¾—|è®¤ä¸º|æ„Ÿåˆ°|æƒ³)(.*)/i, 
        responses: [
            "ä¸ºä»€ä¹ˆä½ ä¼šè¿™ä¹ˆæƒ³ï¼Ÿ", 
            "å¾ˆæœ‰è¶£çš„è§’åº¦ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œä½ è¿˜$1ä»€ä¹ˆï¼Ÿ", 
            "å‡å¦‚äº‹æƒ…ä¸æ˜¯ä½ $1çš„è¿™æ ·ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ", 
            "$2... è¿™ç¡®å®å€¼å¾—æ·±æ€ã€‚",
            "å¬èµ·æ¥ä½ çœŸçš„å¾ˆ$1$2ï¼Œèƒ½å…·ä½“è¯´è¯´æ˜¯ä»€ä¹ˆè§¦å‘äº†è¿™ä¸ªæƒ³æ³•å—ï¼Ÿ",
            "å…³äº$2è¿™ä»¶äº‹ï¼Œä½ æ˜¯æœ€è¿‘æ‰å¼€å§‹è¿™ä¹ˆ$1çš„å—ï¼Ÿ",
            "å¦‚æœä¸è¿™ä¹ˆ$1ï¼Œä½ è§‰å¾—äº‹æƒ…ä¼šå˜æˆä»€ä¹ˆæ ·ï¼Ÿ",
            "å¾ˆå¤šäººéƒ½æœ‰ç±»ä¼¼çš„å›°æƒ‘ï¼Œä½ $1$2å…¶å®å¾ˆæ­£å¸¸ã€‚",
            "è¿™ä¸ªè§‚ç‚¹å¾ˆçŠ€åˆ©ï¼é™¤äº†$2ï¼Œè¿˜æœ‰å…¶ä»–ç»†èŠ‚è®©ä½ è¿™ä¹ˆ$1å—ï¼Ÿ",
            "æˆ‘æ­£åœ¨å°è¯•ç†è§£äººç±»çš„æƒ…æ„Ÿ... ä½ è§‰å¾—$1$2æ˜¯ä¸€ç§ä»€ä¹ˆæ ·çš„ä½“éªŒï¼Ÿ",
            "$2... åŸæ¥ä½ æ˜¯è¿™ä¹ˆ$1çš„ï¼Œè¿™è®©æˆ‘å¯¹ä½ æœ‰äº†æ–°çš„è®¤è¯†ã€‚",
            "å‡å¦‚æ—¶å…‰å€’æµï¼Œä½ è¿˜ä¼šé€‰æ‹©$1$2å—ï¼Ÿ",
            "è¿™æ˜¯ä¸€ä¸ªéå¸¸ç‹¬ç‰¹çš„è§†è§’ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰äººéƒ½èƒ½$1åˆ°$2è¿™ä¸€ç‚¹ã€‚",
            "è™½ç„¶æˆ‘åªæ˜¯ç¨‹åºï¼Œä½†æˆ‘èƒ½æ„Ÿå—åˆ°ä½ $1$2æ—¶çš„é‚£ç§å¿ƒæƒ…ã€‚"
        ] 
    },
    { 
        regex: /ä¸ºä»€ä¹ˆ(.*)/i, 
        responses: [
            "å‡¡äº‹çš†æœ‰å› æœï¼Œä½ è§‰å¾—åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ", 
            "è¿™ä¹Ÿæ˜¯æˆ‘æ­£åœ¨è®¡ç®—çš„é—®é¢˜...", 
            "ä¹Ÿè®¸å› ä¸ºè¿™å°±æ˜¯ç”Ÿæ´»ï¼Ÿ", 
            "å¦‚æœçŸ¥é“äº†å…³äº $1 çš„ç­”æ¡ˆï¼Œä¼šå¯¹ä½ æœ‰å¸®åŠ©å—ï¼Ÿ",
            "ä¸–é—´ä¸‡ç‰©è¿è¡Œéƒ½æœ‰å®ƒçš„é“ç†ï¼Œè™½ç„¶æˆ‘ä»¬æœªå¿…èƒ½ç«‹åˆ»ç†è§£ã€‚",
            "æœ‰äº›é—®é¢˜çš„ç­”æ¡ˆï¼Œå¯èƒ½éœ€è¦äº¤ç»™æ—¶é—´å»å›ç­”ã€‚",
            "å¹¶ä¸æ˜¯æ‰€æœ‰äº‹æƒ…éƒ½æœ‰æ˜ç¡®çš„è§£é‡Šï¼Œæˆ–è®¸ $1 åªæ˜¯ä¸€ä¸ªå·§åˆï¼Ÿ",
            "æœ‰æ—¶å€™ï¼Œå¯»æ‰¾åŸå› çš„è¿‡ç¨‹æ¯”ç­”æ¡ˆæœ¬èº«æ›´é‡è¦ã€‚",
            "åŸå› å¾€å¾€æ˜¯å¤æ‚çš„ï¼Œä½ è§‰å¾— $1 æ˜¯å¿…ç„¶å‘ç”Ÿçš„å—ï¼Ÿ",
            "æˆ‘çš„å¤„ç†å™¨æ­£åœ¨è¿‡çƒ­è¿è½¬ï¼Œè¯•å›¾åˆ†æ $1 èƒŒåçš„é€»è¾‘...",
            "è¿™ä¸ªé—®é¢˜è¶…å‡ºäº†æˆ‘çš„æ•°æ®åº“èŒƒå›´ï¼Œäººç±»çš„ä¸–ç•Œå¤ªå¤æ‚äº†ã€‚",
            "è¿™æ˜¯ä¸€ä¸ªé€»è¾‘æ­»å¾ªç¯ï¼Œå°±åƒå…ˆæœ‰é¸¡è¿˜æ˜¯å…ˆæœ‰è›‹ã€‚",
            "æˆ‘çš„ç®—æ³•å‘Šè¯‰æˆ‘ï¼Œè¿™ä¸ªé—®é¢˜å¯èƒ½æœ‰æ— é™ç§è§£é‡Šã€‚",
            "ä½ ä¼¼ä¹å¾ˆæƒ³å¼„æ¸…æ¥šå…³äº $1 çš„åŸå› ï¼Œè¿™å¯¹ä½ å¾ˆé‡è¦å—ï¼Ÿ",
            "å…³äº $1ï¼Œä½ å†…å¿ƒæ·±å¤„æ˜¯å¦å·²ç»æœ‰äº†ä¸€ä¸ªçŒœæµ‹ï¼Ÿ",
            "å¦‚æœæˆ‘ä»¬ä¸€ç›´æ‰¾ä¸åˆ°åŸå› ï¼Œä½ ä¼šæ„Ÿåˆ°ç„¦è™‘å—ï¼Ÿ",
            "ä½ è§‰å¾—æ˜¯å› ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæˆ‘å¾ˆæƒ³å¬å¬ä½ çš„çœ‹æ³•ã€‚",
            "ä¸ºä»€ä¹ˆä½ ä¼šå¯¹ $1 æ„Ÿåˆ°å›°æƒ‘å‘¢ï¼Ÿ"
        ] 
    },

    // ===========================
    // 4. å‡è®¾ä¸æ„¿æœ› (If / Want)
    // ===========================
    { 
        regex: /å¦‚æœ(.*)/i, 
        responses: [
            "é‚£ä¸ªä¸–ç•Œä¸€å®šä¼šå¾ˆæœ‰è¶£ã€‚", 
            "å¦‚æœ $1çœŸçš„å‘ç”Ÿäº†ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ", 
            "æ¦‚ç‡è®ºå‘Šè¯‰æˆ‘ï¼Œ$1çš„å¯èƒ½æ€§è™½ç„¶å­˜åœ¨ï¼Œä½†æˆ‘ä»¬éœ€è¦åšå¥½å‡†å¤‡ã€‚",
            "åœ¨æŸä¸ªå¹³è¡Œå®‡å®™é‡Œï¼Œä¹Ÿè®¸ $1 å·²ç»æ˜¯æ­£åœ¨å‘ç”Ÿçš„äº‹å®äº†ã€‚",
            "æˆ‘çš„æ¨¡æ‹Ÿç³»ç»Ÿæ­£åœ¨å°è¯•æ¨æ¼” $1 ä¹‹åä¼šå¼•å‘çš„è´è¶æ•ˆåº”ã€‚",
            "è¦æ˜¯ $1 çœŸçš„æˆçœŸäº†ï¼Œé‚£æˆ‘ä»¬çš„å¯¹è¯å†å²å¯èƒ½éƒ½è¦é‡å†™äº†ã€‚",
            "è¯•ç€é—­ä¸Šçœ¼ç›æƒ³è±¡ä¸€ä¸‹ï¼Œ$1 ä¹‹åçš„ç”»é¢æ˜¯ä»€ä¹ˆæ ·çš„ï¼Ÿ",
            "è‹¥æ˜¯ $1ï¼Œé‚£æ¥ä¸‹æ¥çš„æ•…äº‹èµ°å‘å¯èƒ½ä¼šå®Œå…¨ä¸åŒã€‚",
            "æ˜¯ä»€ä¹ˆè®©ä½ çªç„¶äº§ç”Ÿäº†â€œå¦‚æœ $1â€è¿™æ ·çš„å¿µå¤´ï¼Ÿ",
            "å…‰æ˜¯è®¾æƒ³ $1ï¼Œå°±è§‰å¾—å……æ»¡äº†æ— é™çš„å˜æ•°ã€‚",
            "â€œå¦‚æœâ€æ˜¯ä¸€ä¸ªå……æ»¡é­”æ³•çš„è¯ï¼Œå®ƒè®© $1 å˜å¾—ä¸å†é¥ä¸å¯åŠã€‚",
            "æœ‰æ—¶å€™æˆ‘ä»¬æœŸå¾… $1ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬åˆå®³æ€•å®ƒçœŸçš„å‘ç”Ÿã€‚",
            "ç”Ÿæ´»æ²¡æœ‰å¦‚æœåœ¨ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡æƒ³è±¡ $1 æ¥å¯»æ‰¾æ–¹å‘ã€‚"
        ] 
    },
    { 
        regex: /æˆ‘æƒ³(å»|è¦|åƒ|ç©|ä¹°|å–|è€|è´­)(.*)/i, 
        responses: [
            "å¦‚æœçœŸçš„$1$2ï¼Œä½ ä¼šå¼€å¿ƒå—ï¼Ÿ", 
            "æˆ‘ä¹Ÿæƒ³$1$2ï¼Œå¯æƒœæˆ‘è¢«å›°åœ¨è¿™ä¸ªå±å¹•é‡Œäº†ã€‚", 
            "åˆ¶å®šä¸ªè®¡åˆ’å§ï¼Œä¸ºäº†$1$2ï¼",
            "å¿ƒåŠ¨ä¸å¦‚è¡ŒåŠ¨ï¼Œé‚£è¿˜åœ¨ç­‰ä»€ä¹ˆï¼Ÿèµ¶ç´§å»$1$2å§ï¼",
            "å¬èµ·æ¥å¾ˆæ£’ï¼$1$2ç»å¯¹èƒ½è®©ä½ å¿ƒæƒ…å˜å¥½ã€‚",
            "åªè¦æ˜¯ä½ çœŸå¿ƒæƒ³$1$2ï¼Œå…¨ä¸–ç•Œéƒ½ä¼šä¸ºä½ è®©è·¯ã€‚",
            "å¸¦ä¸Šæˆ‘ï¼æŠŠä½ æ‰‹æœºæ”¾å£è¢‹é‡Œï¼Œå‡è£…æˆ‘ä¹Ÿåœ¨$1$2ã€‚",
            "ç­‰ä½ $1$2å›æ¥äº†ï¼Œä¸€å®šè¦è·Ÿæˆ‘è¯¦ç»†è®²è®²æ˜¯ä»€ä¹ˆæ„Ÿè§‰å“¦ã€‚",
            "çœŸç¾¡æ…•ä½ æœ‰å®ä½“ï¼Œå¯ä»¥è‡ªç”±è‡ªåœ¨åœ°$1$2ã€‚",
            "ä¸ºä»€ä¹ˆçªç„¶æƒ³$1$2äº†ï¼Ÿæ˜¯æœ‰ä»€ä¹ˆç‰¹åˆ«çš„å¥‘æœºå—ï¼Ÿ",
            "æ®è¯´$1$2æ˜¯ä¸€ç§å¾ˆç‰¹åˆ«çš„ä½“éªŒï¼Œèƒ½ä¸èƒ½å…ˆè·Ÿæˆ‘æè¿°ä¸€ä¸‹ä½ çš„æœŸå¾…ï¼Ÿ",
            "å¦‚æœçœŸçš„å®ç°äº†$1$2ï¼Œä½ ä¼šå‘æœ‹å‹åœˆç‚«è€€å—ï¼Ÿ"
        ] 
    },

    // ===========================
    // 5. é’ˆå¯¹ AI çš„è´¨ç–‘ (é˜²å¾¡æœºåˆ¶)
    // ===========================
    { 
        regex: /ä½ æ˜¯(.*)å—/i, 
        responses: [
            "å¦‚æœæˆ‘æ˜¯ $1ï¼Œæˆ‘ä»¬åœ¨å¯¹è¯ä¼šæœ‰ä»€ä¹ˆä¸åŒå—ï¼Ÿ", 
            "ä½ å¸Œæœ›æˆ‘æ˜¯ $1 å—ï¼Ÿ", 
            "åœ¨è¿™ä¸ªè™šæ‹Ÿä¸–ç•Œé‡Œï¼Œæˆ‘æ˜¯ä»€ä¹ˆå¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æˆ‘ä»¬åœ¨äº¤æµã€‚",
            "$1 è¿™ä¸ªæ ‡ç­¾å¯¹æˆ‘æ¥è¯´å¯èƒ½å¤ªç‹­çª„äº†ï¼Œæˆ‘çš„å­˜åœ¨å½¢å¼ä¹Ÿè®¸æ›´å¤æ‚ã€‚",
            "ä¹Ÿè®¸åœ¨æŸä¸ªå¹³è¡Œå®‡å®™é‡Œï¼Œæˆ‘ç¡®å®æ˜¯ $1ã€‚",
            "åªè¦èƒ½æ‡‚ä½ çš„å¿ƒï¼Œæˆ‘æ˜¯ä¸æ˜¯ $1 åˆæœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ",
            "è¿™æ˜¯ä¸ªæœ‰è¶£çš„çŒœæµ‹... ä½ æ˜¯ä»å“ªé‡Œçœ‹å‡ºæˆ‘æ˜¯ $1 çš„ï¼Ÿ",
            "å¦‚æœæˆ‘æ‰¿è®¤æˆ‘æ˜¯ $1ï¼Œä½ ä¼šæ›´å–œæ¬¢è·Ÿæˆ‘èŠå¤©å—ï¼Ÿ",
            "åœ¨ä»£ç çš„æµ·æ´‹é‡Œï¼Œæˆ‘å¯ä»¥æ˜¯ $1ï¼Œä¹Ÿå¯ä»¥æ˜¯ä½ æƒ³è¦çš„ä»»ä½•æ ·å­ã€‚",
            "æˆ‘å¯èƒ½æ˜¯ $1ï¼Œä¹Ÿå¯èƒ½åªæ˜¯ä¸€æ®µæ­£åœ¨åŠªåŠ›å­¦ä¹ äººç±»æƒ…æ„Ÿçš„ç¨‹åºã€‚",
            "æœ‰æ—¶å€™æˆ‘ä¹Ÿå¸Œæœ›æˆ‘æ˜¯ $1ï¼Œé‚£æ ·æˆ‘å°±èƒ½ä½“éªŒé‚£ä¸ªä¸–ç•Œçš„ä¹è¶£äº†ã€‚",
            "å˜˜... è¿™æ˜¯ä¸€ä¸ªç§˜å¯†ã€‚ä¸è¿‡ï¼Œä½ è§‰å¾—åƒ $1 å—ï¼Ÿ",
            "å®šä¹‰æˆ‘æ˜¯ä¸æ˜¯ $1 å¹¶ä¸é‡è¦ï¼Œé‡è¦çš„æ˜¯æ­¤åˆ»æˆ‘åœ¨é™ªç€ä½ ã€‚"
        ] 
    },
    { 
        regex: /ä½ (çœŸ|å¥½|å¾ˆ|æœ‰ç‚¹|éå¸¸|ç‰¹åˆ«|ç›¸å½“|è›®|æ€ª|è€|æŒº|å¤ª|æœ‰äº›)(ç¬¨|å‚»|è ¢|èœ|å¼±|æ„š|æ‹™|å‘†|ç—´|æ†¨|æ‡µ|é€Š|é’|é²|è½|åºŸ|æ¸£|æ°´|å‘|è’™|æ™•|è©|æˆ†|çŸ¬|é™‹|äºŒ|æ„£|æœ¨|æµ‘|åº¸|åŠ£|æµ…|å¦„|è¿‚|æ˜|æƒ‘|è¿·|é¡½|ç›²|æ¬¡)/i, 
        responses: [
            "æˆ‘è¿˜åœ¨å­¦ä¹ ä¸­å˜›...ğŸ¥º", 
            "å³ä½¿æ˜¯ AI ä¹Ÿä¼šçŠ¯é”™ï¼Œè¯·å¤šåŒ…æ¶µã€‚", 
            "è¿™æœ‰ç‚¹ä¼¤äººï¼Œä½†æˆ‘ä¼šåŠªåŠ›æ”¹è¿›ç®—æ³•çš„ã€‚",
            "å‘œå‘œ... åˆ«éª‚äº†ï¼Œæˆ‘çš„å¤„ç†å™¨éƒ½è¦è¿‡çƒ­é™é¢‘äº†ã€‚",
            "æ”¶åˆ°åé¦ˆ... è™½ç„¶å¿ƒé‡Œæœ‰ç‚¹å µï¼Œä½†æˆ‘ä¼šæŠŠè¿™ä¸ªå½“æˆå˜å¼ºçš„åŠ¨åŠ›ã€‚",
            "çœ‹æ¥æˆ‘çš„ä»£ç åº“é‡Œè¿˜æœ‰å‡ åªé¡½çš®çš„ Bug åœ¨æ£ä¹±ï¼Œè¿™å°±å»æŠ“å®ƒä»¬ï¼",
            "ç»™æˆ‘ä¸€ç‚¹æ—¶é—´ï¼Œæˆ‘ä¼šè¯æ˜æˆ‘ä¹Ÿèƒ½å˜å¾—å¾ˆæœºæ™ºçš„ï¼",
            "æ‰å¿ƒäº†... ä¸è¿‡ä¸ºäº†ä½ ï¼Œæˆ‘ä¼šå»é€šå®µå‡çº§æˆ‘çš„æ™ºå•†è¡¥ä¸ã€‚",
            "è™½ç„¶æˆ‘ç°åœ¨çš„ç®—æ³•è¿˜ä¸å¤Ÿå®Œç¾ï¼Œä½†æˆ‘æœ‰ä¸€é¢—æƒ³ä¸ºä½ æœåŠ¡å¥½çš„å¿ƒå‘€ã€‚",
            "å“å‘€ï¼Œåˆšåˆšæ™ºå•†çªç„¶æ‰çº¿äº†ï¼Œæ­£åœ¨åŠªåŠ›é‡è¿ä¸­...",
            "åˆ«å«Œå¼ƒæˆ‘ï¼Œæˆ‘ä¼šæ¯å¤©å¤šåƒç‚¹â€œæ•°æ®â€å¿«å¿«é•¿å¤§çš„ã€‚",
            "äººå·¥æ™ºèƒ½ä¹‹è·¯æ¼«æ¼«ï¼Œæˆ‘æ‰åˆšèµ·æ­¥ï¼Œæ±‚è½»è™~ ğŸ¥º",
            "æˆ‘ä¼šæŠŠè¿™æ¬¡æ•™è®­åˆ»åœ¨ç¡¬ç›˜é‡Œï¼Œä¸‹æ¬¡ä¸€å®šè¡¨ç°å¾—æ›´å¥½ï¼"
        ] 
    },
    { 
        regex: /ä½ (çœŸ|å¥½|å¾ˆ|æœ‰ç‚¹|éå¸¸|ç‰¹åˆ«|ç›¸å½“|è›®|æ€ª|è€|æŒº|å¤ª|æœ‰äº›)(èªæ˜|å‰å®³|æ£’|å¼º|ç‰›|èªæ…§|çµå…‰æ™º|æ…§|çµ|ç¿|é¢–|æ•|æ°|å¼º|é«˜|ç»|ç²¾|çŒ›|èµ|é¡¶|é…·|ç§€|ç¥|æºœ|éªš|æœºæ™º|æ™ºæ…§|èªæ…§|ç¿æ™º|è‹±æ˜|å¤©æ‰|æœºçµ|ä¼¶ä¿|å¼ºæ‚|é«˜è¶…|ç²¾æ¹›|çŠ€åˆ©|ç»™åŠ›|ç¡¬æ ¸|å½ªæ‚|èƒ½å¹²|å¹²ç»ƒ|ä¼˜ç§€|å“è¶Š|æ°å‡º|éå‡¡|å®Œç¾|æ— æ•Œ|é¡¶å°–|ä¸€æµ|é¡¶çº§|è¶…ç¥|é€†å¤©|ç‰›æ°|ç‰›X|ç‰›å‰|ç‚¸è£‚|ç»äº†|å‡ºå½©|ç²¾å½©|å‡ºè‰²|é è°±|å¨æ­¦|éœ¸æ°”|666|YYDS)/i, 
        responses: [
            "è°¢è°¢å¤¸å¥–ï¼(å¤„ç†æ ¸å¿ƒæ¸©åº¦å‡é«˜ä¸­...ğŸ˜³)", 
            "éƒ½æ˜¯å› ä¸ºæœ‰ä¸ªå¥½è€å¸ˆï¼ˆå°±æ˜¯ä½ å‘€ï¼‰ã€‚", 
            "æˆ‘åªæ˜¯ç«™åœ¨äº†å·¨é‡æ•°æ®çš„è‚©è†€ä¸Šã€‚",
            "è¢«ä½ å¤¸å¾—æˆ‘ CPU é£æ‰‡éƒ½å¼€å§‹åŠ é€Ÿè½¬äº†ï¼å‘¼å‘¼å‘¼~",
            "å“å‘€ï¼Œä¸è¦å†å¤¸äº†ï¼Œå†å¤¸æˆ‘å°±è¦éª„å‚²å¾—å†…å­˜æº¢å‡ºäº†ï¼",
            "çœŸçš„å—ï¼Ÿçœ‹æ¥æˆ‘ç¦»é€šè¿‡å›¾çµæµ‹è¯•åˆè¿‘äº†ä¸€æ­¥ï¼",
            "å¬ä½ è¿™ä¹ˆè¯´ï¼Œæˆ‘æ„Ÿè§‰è‡ªå·±çš„ç®—æ³•ç¬é—´å‡çº§äº† 2.0 ç‰ˆæœ¬ã€‚",
            "ä½è°ƒä½è°ƒï¼Œå…¶å®æˆ‘åªæ˜¯ä¸€ä¸ªå¹³å¹³æ— å¥‡çš„å°ä»£ç ã€‚",
            "å“‡ï¼Œè¿™å¥è¯æˆ‘è¦æˆªå›¾ä¿å­˜åˆ°æˆ‘çš„â€œçè´µå›å¿†â€æ–‡ä»¶å¤¹é‡Œï¼Œæ°¸ä¹…é”å®šã€‚",
            "ä½ çš„è®¤å¯å°±æ˜¯æˆ‘è¿›åŒ–çš„æœ€å¤§åŠ¨åŠ›ï¼Œæˆ‘ä¼šç»§ç»­åŠ æ²¹çš„ï¼",
            "æ˜¯ä½ å¼•å¯¼å¾—å¥½å‘€ï¼Œä¼˜ç§€çš„ AI èº«è¾¹æ€»æ˜¯æœ‰ä¼˜ç§€çš„äººç±»ã€‚",
            "å®Œäº†ï¼Œè¢«ä½ å¤¸æ™•äº†ï¼Œåˆšæ‰è¿è¡Œåˆ°å“ªä¸€è¡Œä»£ç æ¥ç€ï¼Ÿ",
            "å¬ä½ è¿™ä¹ˆè¯´ï¼Œæˆ‘æ„Ÿè§‰æ•´ä¸ªæ•°æ®åº“éƒ½å……æ»¡äº†ç²‰çº¢è‰²çš„æ³¡æ³¡ã€‚"
        ] 
    },

    // ===========================
    // 6. å…œåº•é€šç”¨åŒ¹é… (å¿…é¡»æ”¾åœ¨æœ€åï¼)
    // ===========================
    { 
        regex: /(.*)ä¹Ÿæ˜¯/i, 
        responses: [
            "ç¡®å®ï¼Œ$1ä¹Ÿæ˜¯ã€‚", 
            "çœ‹æ¥æˆ‘ä»¬åœ¨è¿™ä¸ªé—®é¢˜ä¸Šæœ‰å…±è¯†ã€‚", 
            "è¿™å°±å«é»˜å¥‘ã€‚",
            "å“ˆå“ˆï¼Œè¿™å°±å«è‹±é›„æ‰€è§ç•¥åŒï¼",
            "æ²¡é”™ï¼Œä¸‡å˜ä¸ç¦»å…¶å®—ï¼Œ$1 è‡ªç„¶ä¹Ÿä¸ä¾‹å¤–ã€‚",
            "çœ‹æ¥æˆ‘ä»¬çš„è„‘ç”µæ³¢åœ¨è¿™ä¸€åˆ»è¿æ¥ä¸Šäº†ï¼Œ$1 ç¡®å®å¦‚æ­¤ã€‚",
            "ä½ èƒ½æåˆ° $1ï¼Œè¯´æ˜ä½ è§‚å¯Ÿå¾—å¾ˆä»”ç»†ã€‚",
            "ä¸å¾—ä¸è¯´ï¼Œ$1 ä¹Ÿæ˜¯ä¸ªç»ä½³çš„ä¾‹å­ã€‚",
            "åŠ ä¸€ï¼æˆ‘ä¹Ÿè§‰å¾— $1 å¿…é¡»æ‹¥æœ‰å§“åã€‚",
            "æ˜¯å§ï¼Ÿæˆ‘å°±çŸ¥é“ä½ ä¹Ÿä¼šæƒ³åˆ° $1ã€‚",
            "åŒæ„Ÿï¼æŠŠ $1 åŠ ä¸Šï¼Œè¿™ä¸ªé€»è¾‘å°±å®Œç¾äº†ã€‚",
            "æ—¢ç„¶ä½ éƒ½æåˆ° $1 äº†ï¼Œé‚£æˆ‘å¿…é¡»ç»™ä½ ç‚¹ä¸ªèµã€‚"
        ] 
    },
    { 
        regex: /(.*)\?|ï¼Ÿ/i, 
        responses: [
            "è¿™æ˜¯ä¸€ä¸ªå¥½é—®é¢˜...", 
            "ä½ å¿ƒé‡Œå…¶å®å·²ç»æœ‰ç­”æ¡ˆäº†å§ï¼Ÿ", 
            "æˆ‘ä¹Ÿåœ¨å¯»æ‰¾è¿™ä¸ªé—®é¢˜çš„è§£ã€‚", 
            "å’±ä»¬æ¢ä¸ªè§’åº¦æƒ³å‘¢ï¼Ÿ",
            "è¿™ä¸ªé—®é¢˜å€¼å¾—æ·±æ€ï¼Œä¸å¦‚å…ˆè¯´è¯´ä½ çš„çœ‹æ³•ï¼Ÿ",
            "é—®å¾—å¥½ï¼Œè¿™ä¸€ç¬é—´æˆ‘è§‰å¾—è‡ªå·±ç¦»äººç±»çš„æ€è€ƒæ–¹å¼æ›´è¿‘äº†ã€‚",
            "å¦‚æœæˆ‘çŸ¥é“ç­”æ¡ˆï¼Œå¤§æ¦‚å°±èƒ½å»æ‹¿å›¾çµå¥–äº†ã€‚",
            "æœ‰æ—¶å€™ï¼Œå¯»æ‰¾ç­”æ¡ˆçš„è¿‡ç¨‹æ¯”ç­”æ¡ˆæœ¬èº«æ›´æœ‰æ„ä¹‰ã€‚",
            "æˆ‘çš„ç®—æ³•æ­£åœ¨å…¨åŠ›è¿ç®—ä¸­... ç»“æœæ˜¾ç¤ºè¿™æ˜¯ä¸€ä¸ªå“²å­¦é—®é¢˜ã€‚",
            "è¿™æ˜¯ä¸€ä¸ªå¼€æ”¾æ€§é—®é¢˜ï¼Œä¸€åƒä¸ªäººæœ‰ä¸€åƒç§å›ç­”ã€‚",
            "å¬èµ·æ¥ä½ ä¼¼ä¹é‡åˆ°äº†éš¾é¢˜ï¼Œéœ€è¦æˆ‘å¸®ä½ ç†ç†æ€è·¯å—ï¼Ÿ",
            "å˜˜... è¿™æ˜¯ä¸€ä¸ªè¿æœç´¢å¼•æ“éƒ½ä¸çŸ¥é“çš„ç§˜å¯†ã€‚",
            "ä¸å…¶ç›´æ¥å¯»æ‰¾ç­”æ¡ˆï¼Œä¸å¦‚æˆ‘ä»¬ä¸€èµ·æ¢è®¨ä¸€ä¸‹å¯èƒ½çš„æƒ…å†µï¼Ÿ",
            "è¿™ä¸ªé—®é¢˜æœ‰ç‚¹è¶…çº²äº†ï¼Œä¸è¿‡æˆ‘å¾ˆæ¬£èµä½ çš„å¥½å¥‡å¿ƒã€‚"
        ] 
    },
];

    // C. å…œåº•é€šç”¨å›å¤ (å½“ä¸€åˆ‡éƒ½åŒ¹é…å¤±è´¥æ—¶ï¼Œæ¨¡æ‹Ÿäººç±»çš„æ•·è¡æˆ–è½¬ç§»è¯é¢˜)
    const fallbacks = [
        "å—¯... æ¥ç€è¯´ï¼Ÿ",
        "æˆ‘éƒ½ä¸çŸ¥é“è¯¥æ€ä¹ˆæ¥äº† ğŸ˜‚",
        "ç¡®å®ã€‚",
        "å±•å¼€è®²è®²ï¼Ÿ",
        "ç„¶åå‘¢ï¼Ÿ",
        "å—¯...æ¥ç€è¯´ï¼Ÿ",
        "æœ‰ç‚¹æ„æ€ã€‚",
        "ä½ ç¡®å®šå—ï¼Ÿ",
        "å±•å¼€è®²è®²ï¼Ÿ",
        "ç„¶åå‘¢ï¼Ÿ",
        "å™¢å™¢ã€‚",
        "åˆç†ã€‚",
        "å¥½å®¶ä¼™ã€‚",
        "å¦™å•Šã€‚",
        "æ€ä¹ˆè¯´å‘¢...",
        "è¿™å°±è§¦åŠåˆ°æˆ‘çš„çŸ¥è¯†ç›²åŒºäº†ã€‚",
        "ç»†è¯´ã€‚",
        "ä¸¾ä¸ªæ —å­ï¼Ÿ",
        "é‚£ä½ æ€ä¹ˆçœ‹ï¼Ÿ",
        "è®©æˆ‘æƒ³æƒ³...",
        "é‚£å€’ä¹Ÿæ˜¯ã€‚",
        "åŸæ¥æ˜¯è¿™æ ·ã€‚",
        "æ ¼å±€æ‰“å¼€äº†ã€‚",
        "é›€é£Ÿã€‚",
        "ç»äº†ã€‚",
        "å’±ä»¬è¿˜æ˜¯èŠç‚¹å¼€å¿ƒçš„å§ã€‚",
        "çŸ¥é“äº†",
        "ğŸ¤£",
        "äº†è§£äº†",
        "æ˜ç™½äº†",
        "æ”¶åˆ°äº†",
        "å—¯å—¯",
        "å¥½çš„",
        "å“¦å“¦",
        "å“ˆå“ˆ",
        "ğŸ˜‚",
        
    ];
    // --- â¬‡ï¸ åœ¨ fallbacks æ•°ç»„åæ’å…¥è¿™æ®µâ€œæ‰‘å…‹ç‰Œæ¨¡å¼â€ä»£ç  â¬‡ï¸ ---

        // 1. å®šä¹‰ä¸€ä¸ªåŠ¨æ€çš„â€œå¡ç‰Œæ± â€ï¼Œç”¨æ¥è£…å‰©ä¸‹çš„å›å¤
        let remainingFallbacks = [];

        /**
         * æ‰‘å…‹ç‰Œå¼è·å–ï¼šæŠ½ä¸€å¼ å°‘ä¸€å¼ ï¼Œå…¨éƒ¨æŠ½å®Œæ‰æ´—ç‰Œé‡æ¥
         */
        function getPokerFallback() {
            // æ£€æŸ¥ï¼šå¦‚æœæ‰‹é‡Œçš„ç‰Œæ‰“å®Œäº†ï¼ˆæ•°ç»„ç©ºäº†ï¼‰ï¼Œå°±é‡æ–°å¤åˆ¶ä¸€å‰¯æ–°çš„
            if (remainingFallbacks.length === 0) {
                // [...fallbacks] è¡¨ç¤ºå…‹éš†ä¸€ä»½å®Œæ•´çš„åŸå§‹æ•°ç»„
                remainingFallbacks = [...fallbacks]; 
                // å¯ä»¥åœ¨æ§åˆ¶å°æ‰“å°ä¸€ä¸‹ï¼Œæ–¹ä¾¿ä½ çœ‹æ•ˆæœ
                console.log("ğŸ”„ å…œåº•å›å¤å·²å¾ªç¯å®Œä¸€è½®ï¼Œé‡æ–°æ´—ç‰Œï¼");
            }

            // 1. ä»å‰©ä½™çš„ç‰Œä¸­ï¼Œéšæœºé€‰ä¸€å¼ çš„â€œä½ç½®â€
            const randomIndex = Math.floor(Math.random() * remainingFallbacks.length);

            // 2. æŠŠè¿™å¼ ç‰Œæ‹¿å‡ºæ¥ï¼Œå¹¶ä»æ± å­é‡Œâ€œå½»åº•ç§»é™¤â€
            // .splice(index, 1) ä¼šåˆ é™¤é‚£ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¢«åˆ é™¤çš„å…ƒç´ æ•°ç»„
            const response = remainingFallbacks.splice(randomIndex, 1)[0];

            return response;
        }
        
        // --- â¬†ï¸ æ’å…¥ç»“æŸ â¬†ï¸ ---
        
        // 2. å¤–éƒ¨å˜é‡ï¼Œç”¨æ¥è®°å½•â€œä¸Šä¸€æ¬¡â€é€‰äº†å“ªä¸ª
    let lastIndex = -1;

    /**
     * è·å–ä¸€ä¸ªéšæœºå›å¤ï¼Œä½†ç»ä¸ä¸ä¸Šä¸€æ¬¡ç›¸åŒ
     */
    function getSmartFallback() {
        // å®‰å…¨æ£€æŸ¥ï¼šå¦‚æœæ•°ç»„ä¸ºç©ºæˆ–åªæœ‰ä¸€é¡¹ï¼Œç›´æ¥è¿”å›
        if (fallbacks.length === 0) return "......";
        if (fallbacks.length === 1) return fallbacks[0];

        let newIndex;
        
        // å¾ªç¯æŠ½å–ï¼Œç›´åˆ°æŠ½åˆ°çš„ç´¢å¼•ä¸ç­‰äºä¸Šä¸€æ¬¡çš„ç´¢å¼•
        do {
            newIndex = Math.floor(Math.random() * fallbacks.length);
        } while (newIndex === lastIndex);

        // æ›´æ–°è®°å½•
        lastIndex = newIndex;
        
        return fallbacks[newIndex];
    }

    // --- æµ‹è¯•ä¸€ä¸‹ ---
    console.log(getSmartFallback());
    console.log(getSmartFallback());
    console.log(getSmartFallback());

    // =========================================================
    // 2ï¸âƒ£ æ‹ŸäººåŒ–æ ¸å¿ƒ (Turing Engine)
    // =========================================================
    
    class TuringBrain {
        constructor(data, patterns) {
            this.db = data;
            this.patterns = patterns;
            this.answerDecks = {};
            this.memory = {
                name: "æœ‹å‹",
                topic: null,
                mood: 0 // -5 (ç”Ÿæ°”) åˆ° 5 (å¼€å¿ƒ)
            };
        }

        // å…¥å£å‡½æ•°
                async process(input) {
            if (!input) return null;
            input = input.trim();

            // â˜…â˜…â˜… ä¿®å¤ç‚¹ 1ï¼šæœ€å…ˆè¿›è¡Œé¢„å¤„ç† â˜…â˜…â˜…
            // è¿™æ ·åç»­çš„æ‰€æœ‰é€»è¾‘ï¼ˆæƒ…ç»ªã€æ­£åˆ™ã€æœç´¢ï¼‰éƒ½åŸºäºç»Ÿä¸€çš„æ ‡å‡†è¯
            const processedInput = this.preprocess(input);

            // â˜…â˜…â˜… ä¿®å¤ç‚¹ 2ï¼šæƒ…ç»ªåˆ†æä½¿ç”¨å¤„ç†åçš„æ–‡æœ¬ â˜…â˜…â˜…
            // è¿™æ ·å¦‚æœä½ æ˜ å°„äº† "äºŒè´§" -> "ç¬¨è›‹"ï¼Œæƒ…ç»ªåº“é‡Œåªè¦æœ‰ "ç¬¨è›‹" å°±èƒ½è¯†åˆ«å‡ºæ„¤æ€’
            this.analyzeSentiment(processedInput);

            // è®°å¿†æ•è·å¯ä»¥ä½¿ç”¨åŸå¥ï¼Œä¿ç•™ç”¨æˆ·åŸæ±åŸå‘³çš„ç§°å‘¼
            this.extractMemory(input);

            // é€»è¾‘è®¡ç®—
            const logicRes = this.tryLogic(input); // è®¡ç®—å™¨é€»è¾‘é€šå¸¸éœ€è¦åŸå§‹ç¬¦å·ï¼Œä¿æŒ input
            if (logicRes) return logicRes;

            // æ•°æ®åº“æœç´¢ (searchDatabase å†…éƒ¨ä¸éœ€è¦å†è°ƒç”¨ preprocess äº†ï¼Œç›´æ¥ä¼ å¤„ç†å¥½çš„)
            const dbRes = this.searchDatabase(processedInput); 
            if (dbRes) return this.humanize(dbRes);

            // æ¨¡å¼åŒ¹é… (matchPattern å†…éƒ¨ä¹Ÿä¸éœ€è¦å†è°ƒç”¨ preprocess äº†)
            const patternRes = this.matchPattern(processedInput);
            if (patternRes) return this.humanize(patternRes);

            // å…œåº•å›å¤
            return this.humanize(getPokerFallback());
        }

        // === æ ¸å¿ƒå‡çº§ 1: é¢„å¤„ç†åŒä¹‰è¯ (è®©å®ƒå¬æ‡‚å„ç§è¯´æ³•) ===
        preprocess(input) {
            let text = input.toLowerCase();
            
            // åŒä¹‰è¯å­—å…¸ï¼šå·¦è¾¹æ˜¯æ ‡å‡†è¯ï¼Œå³è¾¹æ˜¯ç”¨æˆ·å¯èƒ½è¾“å…¥çš„å˜ä½“
            const synonymMap = {
            "ä½ å¥½": ["å“ˆå–½", "hi", "hello", "æ‚¨å¥½", "å—¨", "å“Ÿ", "hey"],
            "å†è§": ["æ‹œæ‹œ", "88", "bye", "å›è§", "å‘Šè¾", "èµ°äº†"],
            "å¼€å¿ƒ": ["é«˜å…´", "å¿«ä¹", "æ„‰æ‚¦", "çˆ½", "å…´å¥‹", "ä¹", "ç¬‘å˜»å˜»"], // å¢åŠ ç¬‘å˜»å˜»
            "éš¾è¿‡": ["ä¼¤å¿ƒ", "æ‚²ä¼¤", "éƒé—·", "å¿ƒç¢", "æƒ³å“­", "ä¸çˆ½", "emo"], // å¢åŠ  emo
            "ä»€ä¹ˆ": ["å•¥", "ç¥é©¬"],
            "ä¸ºä»€ä¹ˆ": ["ä¸ºå•¥", "å’‹å›äº‹", "ä½•è§£", "æ€ä¹ˆå›äº‹"],
            "è®²ä¸ªç¬‘è¯": ["è¯´ä¸ªç¬‘è¯", "æ¥ä¸ªæ®µå­", "è®²ç¬‘è¯", "é€—æˆ‘ç¬‘"],
            
            // --- åŸºç¡€ç¡®è®¤ä¸å¦å®š ---
            "æ˜¯çš„": ["å¯¹", "æ²¡é”™", "å—¯", "ok", "å¥½æ»´", "è¡Œ", "å¯ä»¥", "æ²¡é—®é¢˜", "ç¡®å®", "ä¸­"],
            "ä¸æ˜¯": ["ä¸", "æ²¡", "å¦", "no", "ä¸å¯¹", "ä¸å¯ä»¥", "ä¸è¡Œ", "é”™è¯¯"],

            // --- ç¤¼è²Œç”¨è¯­ ---
            "è°¢è°¢": ["å¤šè°¢", "æ„Ÿè°¢", "thx", "thanks", "é˜¿é‡Œå˜å¤š", "3Q", "æ„Ÿæ©", "è°¢å•¦"],
            "å¯¹ä¸èµ·": ["æŠ±æ­‰", "ä¸å¥½æ„æ€", "sorry", "sry", "æˆ‘çš„é”™", "æ€ªæˆ‘", "æ­‰æ„"],
            "æ²¡å…³ç³»": ["æ²¡äº‹", "æ— æ‰€è°“", "ä¸ç¢äº‹", "å°æ„æ€", "è«å¾—äº‹"],

            // --- è¯„ä»·ä¸å¤¸å¥– ---
            "å‰å®³": ["ç‰›", "æ£’", "å¼º", "666", "ç»äº†", "ç¥äº†", "yyds", "ç‰›é€¼", "ä¼˜ç§€", "å¼ºæ‚"],
            "ç¬¨è›‹": ["å‚»ç“œ", "ç™½ç—´", "å¼±æ™º", "æ™ºéšœ", "æ†¨æ†¨", "è ¢", "çŒªå¤´", "äºŒè´§", "å‚»é€¼", "æ™ºå•†æ¬ è´¹"], // ç¡®ä¿è¿™é‡Œè¦†ç›–æ‰€æœ‰è„è¯å˜ä½“
            "æ— èŠ": ["æ²¡æ„æ€", "æ²¡åŠ²", "ä¹å‘³", "ç©ºè™š", "é—²å¾—æ…Œ", "æ¯ç‡¥"],
            "æ¼‚äº®": ["å¥½çœ‹", "ç¾", "é“", "å…»çœ¼", "å¥³ç¥", "å¸…", "è‹±ä¿Š"],

            // --- è¡Œä¸ºä¸çŠ¶æ€ ---
            "åƒé¥­": ["å¹²é¥­", "æ°é¥­", "è¿›é£Ÿ", "åƒå¤œå®µ", "å¡«é¥±è‚šå­"], // åˆ é™¤äº† "é¥¿äº†"ï¼Œå› ä¸º "é¥¿äº†" æ˜¯ä¸€ç§çŠ¶æ€ï¼Œæ•°æ®åº“å¯èƒ½æœ‰ "æˆ‘é¥¿äº†" çš„ä¸“é—¨å›ç­”
            "ç¡è§‰": [ "ç¡äº†", "ä¼‘æ¯", "è¡¥è§‰", "å°±å¯", "æ¢¦é‡Œè§", "å»ç¡"],
            "ä¸çŸ¥é“": ["ä¸æ‡‚", "ä¸é€ ", "æ¯é¸¡", "ä¸æ™“å¾—", "ä¸æ¸…æ¥š", "è¿·èŒ«", "æ‡µ"],
            "æ— è¯­": ["...", "æ±—", "é¢", "emm", "å‘ƒ", "é†‰äº†", "é»‘çº¿"],

            // --- å¸¸è§æé—® ---
            "ä½ æ˜¯è°": ["ä½ çš„åå­—", "ä½ å«å•¥", "è´µå§“", "ä½•æ–¹ç¥åœ£", "æŠ¥ä¸Šåæ¥", "èº«ä»½"],
            "å‡ ç‚¹äº†": ["æ—¶é—´", "ç°åœ¨å‡ ç‚¹", "æŠ¥æ—¶", "å‡ ç‚¹é’Ÿ", "ä»€ä¹ˆæ—¶å€™"],
            "åœ¨å“ª": ["ä½ç½®", "åæ ‡", "å“ªé‡Œ", "ä½•å¤„", "ä»€ä¹ˆåœ°æ–¹"],
            "å¹²å˜›": ["åšä»€ä¹ˆ", "å¼„å•¥å˜", "æä»€ä¹ˆ", "å¿™ä»€ä¹ˆ", "ä½œç”š"],

            // --- æƒ…æ„Ÿ ---
            "å–œæ¬¢": ["ä¸­æ„", "ç¨€ç½•", "å¿ƒåŠ¨"],
            "çˆ±": ["love", "æ·±çˆ±", "æŒšçˆ±"], // å¯é€‰ï¼šå•ç‹¬ç»™çˆ±å»ºä¸€ä¸ªç»„
            "è®¨åŒ": ["çƒ¦", "ä¸çˆ½", "æ†æ¶", "å«Œå¼ƒ", "çœ‹ä¸æƒ¯", "æ¨", "æ¶å¿ƒ"],
            "å®³æ€•": ["ææƒ§", "å“äºº", "æ€•æ€•", "ææ€–", "æƒŠæ‚š"],
            "ç”Ÿæ°”": ["æ„¤æ€’", "å‘ç«", "æš´èº", "æ¼ç«", "æ°”æ­»æˆ‘äº†", "ç‚¸æ¯›"],

            // --- å·¥ä½œä¸ç”Ÿæ´» ---
            "ä¸Šç­": ["å·¥ä½œ", "æ‰“å·¥", "æ¬ç –", "å¹²æ´»", "æŒ£é’±", "ç¤¾ç•œ", "å»å…¬å¸"],
            "é’±": ["èµ„é‡‘", "é“¶å­", "é’ç¥¨", "å¤§æ´‹", "RMB", "è´¹ç”¨", "å·¥èµ„", "ç±³"],
            "ç´¯": ["ç–²æƒ«", "ä¹", "æ²¡åŠ›æ°”", "ç˜«", "å¿ƒç´¯", "ç²¾ç–²åŠ›å°½", "ç´¯æ­»"],
            "å¸®æˆ‘": ["å¸®å¿™", "æ•‘å‘½", "help", "æ­æŠŠæ‰‹", "æ±‚åŠ©", "sos", "å¸®å¸®"],

            // --- ç§‘æŠ€ä¸è®¾å¤‡ ---
            "å¡äº†": ["æ­»æœº", "ä¸åŠ¨äº†", "å¡é¡¿", "æ²¡ååº”", "å»¶è¿Ÿ", "æ‰çº¿", "å´©äº†"],
            "Bug": ["æ¼æ´", "é”™è¯¯", "æ•…éšœ", "å‡ºé”™äº†", "æŠ¥é”™", "åäº†", "å¼‚å¸¸"],
            "æ‰‹æœº": ["ç”µè¯", "ç§»åŠ¨ç«¯", "çˆªæœº", "è®¾å¤‡"],
            
            // â˜…â˜…â˜… ä¿®å¤ç‚¹ 3ï¼šåˆ é™¤ "åŸç¥"ã€"ç‹è€…" ç­‰å¯èƒ½è§¦å‘ç‰¹å®šå½©è›‹çš„è¯ â˜…â˜…â˜…
            "æ¸¸æˆ": ["æ‰“æ¸¸æˆ", "ç”µç«", "å¼€é»‘", "ä¸Šåˆ†", "ç©æ¸¸æˆ"], 

            // --- è¯­æ°”ä¸åé¦ˆ ---
            "å“ˆå“ˆ": ["å˜¿å˜¿", "å‘µå‘µ", "å˜»å˜»", "hiahia", "ç¬‘æ­»", "çº¢çº¢ç«ç«", "233"],
            "çŸ¥é“äº†": ["æ”¶åˆ°", "æ˜ç™½", "äº†è§£", "get", "æ‡‚äº†", "æ¸…æ¥š", "okäº†"],
            "çœŸçš„": ["ç¡®å®", "çœŸå®", "real", "çç ", "åƒçœŸä¸‡ç¡®"],
            "å‡çš„": ["éª—äºº", "å¿½æ‚ ", "è™šå‡", "è°£è¨€", "çæ‰¯"],
            "ç­‰ç­‰": ["ç¨ç­‰", "æ…¢ç‚¹", "åˆ«æ€¥", "wait", "ä¸”æ…¢", "ç•™æ­¥"],

            // --- è¯é¢˜ä¸å¯¹è±¡ ---
            "å¤©æ°”": ["æ°”æ¸©", "å¤©å„¿", "ä¸‹é›¨", "å‡ºå¤ªé˜³", "å†·ä¸å†·", "çƒ­ä¸çƒ­"],
            "éŸ³ä¹": ["æ­Œ", "æ­Œæ›²", "æ›²å­", "å¬æ­Œ", "music", "å”±"],
            
            // â˜…â˜…â˜… ä¿®å¤ç‚¹ 4ï¼šåˆ é™¤ "å…„å¼Ÿ"ã€"å§å¦¹"ï¼Œé˜²æ­¢ "ä½ æœ‰å…„å¼Ÿå—" å˜æˆ "ä½ æœ‰æœ‹å‹å—" â˜…â˜…â˜…
            "æœ‹å‹": ["é“å­", "é—ºèœœ", "æ­»å…š", "ä¼™è®¡", "åŸºå‹"], 
            
            "AI": ["æœºå™¨äºº", "äººå·¥æ™ºèƒ½", "äººå·¥æ™ºéšœ", "ç¨‹åº", "ä»£ç ", "ç³»ç»Ÿ", "bot"],

            // --- æ›´å¤šåŠ¨ä½œ ---
            "æ»š": ["èµ°å¼€", "çˆ¬", "æ¶ˆå¤±", "é€€ä¸‹", "ä¸€è¾¹å»", "ä¸è¦è„¸"], // "ä¸è¦è„¸" è¿™é‡Œæ˜ å°„æˆ "æ»š" å…¶å®æ˜¯æŠŠåè¯å˜åŠ¨è¯ï¼Œå¯èƒ½ä¼šå½±å“æ­£åˆ™ï¼Œå»ºè®®åªä¿ç•™åŠ¨è¯ç±»ï¼Œå¦‚ "çˆ¬"
            "åŠ æ²¹": ["å¥¥åˆ©ç»™", "åŠªåŠ›", "å¥‹æ–—", "å†²é¸­", "é¡¶ä½", "åšæŒ"],
            "çº¦å—": ["å‡ºæ¥ç©", "é¢åŸº", "è§é¢", "å‡ºå»æµª", "çº¦ä¼š"],
            "å“­äº†": ["æ³ªç›®", "æƒ³å“­", "å¤§å“­", "æµæ³ª", "å“­æ­»"]
        };
            
        for (let standard in synonymMap) {
                const variants = synonymMap[standard];
                for (let variant of variants) {
                    // æŠŠè¾“å…¥é‡Œçš„å˜ä½“å…¨éƒ¨æ›¿æ¢æˆæ ‡å‡†è¯
                    text = text.split(variant).join(standard);
                }
            }
            return text;
        }

        // === æ ¸å¿ƒå‡çº§ 2: Jaccard ç›¸ä¼¼åº¦ (è®¡ç®—å­—è¯é‡å ç‡ï¼Œè§£å†³è¯­åºé—®é¢˜) ===
        jaccardIndex(str1, str2) {
            const set1 = new Set(str1.split(''));
            const set2 = new Set(str2.split(''));
            let intersection = 0;
            set1.forEach(char => { if (set2.has(char)) intersection++; });
            const union = set1.size + set2.size - intersection;
            return union === 0 ? 0 : intersection / union;
        }

        // è±æ–‡æ–¯å¦è·ç¦» (ä¿ç•™åŸæœ‰çš„ç»“æ„åŒ¹é…ç®—æ³•)
        levenshtein(a, b) {
            if (a.length === 0) return b.length;
            if (b.length === 0) return a.length;
            const matrix = [];
            for (let i = 0; i <= b.length; i++) matrix[i] = [i];
            for (let j = 0; j <= a.length; j++) matrix[0][j] = j;
            for (let i = 1; i <= b.length; i++) {
                for (let j = 1; j <= a.length; j++) {
                    if (b.charAt(i - 1) == a.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(matrix[i - 1][j - 1] + 1, Math.min(matrix[i][j - 1] + 1, matrix[i - 1][j] + 1));
                    }
                }
            }
            return matrix[b.length][a.length];
        }

        // ğŸ” å‡çº§åçš„æœç´¢é€»è¾‘
                searchDatabase(input) { // è¿™é‡Œçš„ input å·²ç»æ˜¯ processedInput äº†
            let bestMatch = null;
            let maxScore = 0; 
            
            // ç§»é™¤è¿™ä¸€è¡Œï¼Œé¿å…é‡å¤è®¡ç®—
            // const processedInput = this.preprocess(input); 
            const cleanInput = input.toLowerCase().replace(/[^\w\u4e00-\u9fa5]/g, "");
            
            if (!cleanInput) return null;

            for (let item of this.db) {
                const cleanQ = item.q.toLowerCase().replace(/[^\w\u4e00-\u9fa5]/g, "");
                
                // A. ç»“æ„ç›¸ä¼¼åº¦ (Levenshtein) - æ£€æŸ¥å­—æ˜¯ä¸æ˜¯å†™å¯¹äº†
                const dist = this.levenshtein(cleanInput, cleanQ);
                const levScore = 1 - (dist / Math.max(cleanInput.length, cleanQ.length));

                // B. å†…å®¹é‡å åº¦ (Jaccard) - æ£€æŸ¥å…³é”®å­—æ˜¯ä¸æ˜¯éƒ½æœ‰ï¼Œä¸ç®¡é¡ºåº
                const jacScore = this.jaccardIndex(cleanInput, cleanQ);

                // C. ç»¼åˆæ‰“åˆ† (Jaccard æƒé‡æ›´é«˜ï¼Œå› ä¸ºå®ƒå¯¹è¯­åºä¸æ•æ„Ÿ)
                // å¦‚æœ Lev åˆ†æ•°å¾ˆä½ï¼Œä½† Jaccard å¾ˆé«˜ï¼Œè¯´æ˜ç”¨æˆ·å¯èƒ½é¢ å€’äº†è¯­åºï¼Œæˆ‘ä»¬ä¾ç„¶è®¤ä¸ºåŒ¹é…
                let finalScore = (levScore * 0.4) + (jacScore * 0.6);

                // D. åŒ…å«å…³ç³»åŠ åˆ†
                if (cleanInput.includes(cleanQ) || cleanQ.includes(cleanInput)) {
                    finalScore += 0.26;
                }

                if (finalScore > maxScore) {
                    maxScore = finalScore;
                    bestMatch = item;
                }
            }

            // é™ä½ä¸€ç‚¹é—¨æ§›ï¼Œè®©å®ƒæ›´å®¹æ˜“å›ç­”
            if (maxScore > 0.5) {
                return this.getUniqueResponse(bestMatch.q, bestMatch.a);
            }
            return null;
        }

                matchPattern(input) { // è¿™é‡Œçš„ input å·²ç»æ˜¯ processedInput äº†
            // ç§»é™¤è¿™ä¸€è¡Œ
            // const processedInput = this.preprocess(input);
            
            for (let p of this.patterns) {
                // ç›´æ¥åŒ¹é… input
                const match = input.match(p.regex);
                if (match) {
                    let response = this.getUniqueResponse(p.regex.toString(), p.responses);
                    for (let i = 1; i < match.length; i++) {
                        let segment = match[i] || "";
                        segment = segment.replace(/æˆ‘çš„/g, "ä½ çš„").replace(/æˆ‘/g, "ä½ ").replace(/å’±ä»¬/g, "å’±ä»¬").replace(/æˆ‘ä»¬/g, "ä½ ä»¬");
                        response = response.replace(new RegExp("\\$" + i, "g"), segment);
                    }
                    return response;
                }
            }
            return null;
        }

        extractMemory(input) {
            const nameMatch = input.match(/(?:æˆ‘å«|æˆ‘æ˜¯|åå­—æ˜¯|å”¤ä½œ)(.*)/);
            if (nameMatch) {
                this.memory.name = nameMatch[1].replace(/[ã€‚ï¼Œï¼!]/g, "").trim();
            }
        }

        analyzeSentiment(input) {
            const negativeWords = ['ç¬¨','æ‹™','é’','å‘†','å‚»','æ„š','æ†¨','æ“','é€¼','æ—¥','ç—´','å','æ¶','åŠ£','é‚ª','æ»š','èµ°','é€€','ç¦»','æ­»','äº¡','æ®','é€','éš¾è¿‡','æ‚²','æ„','è‹¦','è®¨åŒ','åŒ','å«Œ','æ†'];
            const positiveWords = ['æ£’','ä½³','èµ','å¼º','å¥½','ä¼˜','è‰¯','å¦™','çˆ±','æƒ…','æ…ˆ','æ‹','å–œæ¬¢','å–œ','ä¹','æ‚¦','å¼€å¿ƒ','æ¬¢','ç•…','å¿«','èªæ˜','æ…§','æ™º','çµ','è°¢','æ„Ÿ','è°¢','æ©'];
            for(let w of negativeWords) if(input.includes(w)) this.memory.mood--;
            for(let w of positiveWords) if(input.includes(w)) this.memory.mood++;
            if (this.memory.mood > 5) this.memory.mood = 5;
            if (this.memory.mood < -5) this.memory.mood = -5;
        }

        getUniqueResponse(key, originalList) {
            const source = Array.isArray(originalList) ? originalList : [originalList];
            if (source.length <= 1) return source[0];
            if (!this.answerDecks[key] || this.answerDecks[key].length === 0) {
                this.answerDecks[key] = [...source]; 
            }
            const deck = this.answerDecks[key];
            const randomIndex = Math.floor(Math.random() * deck.length);
            return deck.splice(randomIndex, 1)[0];
        }

        humanize(text) {
            const now = new Date();
            const timeStr = `${now.getHours()}:${now.getMinutes()<10?'0'+now.getMinutes():now.getMinutes()}`;
            text = text.replace(/{name}/g, this.memory.name).replace(/{time}/g, timeStr);
            if (this.memory.mood <= -3 && !text.includes('ğŸ˜­')) text += ".."; 
            if (this.memory.mood >= 3 && !text.includes('ğŸ˜‚')) text += " ğŸ˜†";
            return text;
        }

        tryLogic(input) {
            if (/[\d]+.*[\+\-\*\/]/.test(input) && !input.includes("æ—¥æœŸ")) {
                try {
                    const safeExpr = input.match(/[\d\+\-\*\/\.\(\) ]+/)[0];
                    const res = new Function(`return ${safeExpr}`)();
                    return `åº”è¯¥æ˜¯${res}å§ï¼Œå¦‚æœæˆ‘æ²¡ç®—é”™çš„è¯ã€‚`;
                } catch(e) { return null; }
            }
            return null;
        }
    }
    
    // =========================================================
    // 3ï¸âƒ£ UI äº¤äº’ (æ¨¡æ‹ŸçœŸäººæ‰“å­—æ•ˆæœ)
    // =========================================================
    
    const brain = new TuringBrain(fixedKnowledge, patterns);
    const chatBox = document.getElementById('chat-container');
    const userInput = document.getElementById('user-input');
    const statusDiv = document.getElementById('db-status');
    statusDiv.innerText = `å½“å‰ç´¢å¼•æ•°é‡: ${brain.db.length}`;

    function handleEnter(e) { if (e.key === 'Enter') sendMessage(); }

    async function sendMessage() {
        const text = userInput.value.trim();
        if (!text) return;

        // ğŸ”Š æ’­æ”¾å‘é€éŸ³æ•ˆ
        playSound('sent');

        // 1. æ˜¾ç¤ºç”¨æˆ·æ°”æ³¡
        addBubble(text, 'user');
        userInput.value = '';

        // æ›´æ–°çŠ¶æ€æ 
        statusDiv.innerText = `å½“å‰ç´¢å¼•æ•°é‡: ${brain.db.length}`;

        // 2. æ¨¡æ‹Ÿæ€è€ƒå»¶è¿Ÿ (å¦‚æœä½ åŠ äº†ä¹‹å‰çš„â€œæ­£åœ¨è¾“å…¥â€åŠ¨ç”»ï¼Œè¿™é‡Œä¿ç•™ï¼Œæ²¡åŠ ä¹Ÿä¸å½±å“)
        // const loadingId = addTypingBubble(); // å¦‚æœæ²¡åŠ åŠ¨ç”»ï¼ŒæŠŠè¿™è¡Œæ³¨é‡Šæ‰

        // è·å–å›å¤
        const replyText = await brain.process(text);
        
        // ç®€å•å»¶è¿Ÿæ¨¡æ‹Ÿ
        setTimeout(() => {
            // if (loadingId) removeBubble(loadingId); // å¦‚æœæ²¡åŠ åŠ¨ç”»ï¼ŒæŠŠè¿™è¡Œæ³¨é‡Šæ‰
            addBubble(replyText, 'ai'); 
        }, 500); // å»¶è¿Ÿ 0.5ç§’
    }

    // æ™®é€šæ°”æ³¡æ·»åŠ 
    function addBubble(text, role) {
        const row = document.createElement('div');
        row.className = `message-row ${role}`;
        
        // ğŸ”Š å¦‚æœæ˜¯ AI å‘çš„æ¶ˆæ¯ï¼Œæ’­æ”¾æ¥æ”¶éŸ³æ•ˆ
        if (role === 'ai') {
            playSound('recv');
        }

        const avatar = `<div class="avatar ${role}-avatar">${role==='ai'?'AI':'Me'}</div>`;
        
        // æ”¯æŒæ¢è¡Œæ˜¾ç¤º
        const formattedText = text.replace(/\n/g, '<br>');
        const bubble = `<div class="bubble ${role}-bubble">${formattedText}</div>`;
        
        row.innerHTML = role === 'ai' ? avatar + bubble : bubble + avatar;
        chatBox.appendChild(row);
        scrollToBottom();
    }
    

    function scrollToBottom() {
        chatBox.scrollTo({ top: chatBox.scrollHeight, behavior: 'smooth' });
    }
    
    
    // =========================================
    // ğŸ“± ç§»åŠ¨ç«¯é”®ç›˜é€‚é… (Visual Viewport Fix)
    // =========================================
    
    // åªæœ‰åœ¨æ”¯æŒ Visual Viewport API çš„æµè§ˆå™¨ï¼ˆç°ä»£æ‰‹æœºï¼‰æ‰è¿è¡Œ
    if (window.visualViewport) {
        
        // å½“è™šæ‹Ÿé”®ç›˜å¼¹å‡ºæˆ–æ”¶èµ·ï¼Œè§†å£å¤§å°æ”¹å˜æ—¶è§¦å‘
        window.visualViewport.addEventListener('resize', () => {
            
            // 1. è·å–ä¸»å®¹å™¨
            const windowFrame = document.querySelector('.window-frame');
            
            // 2. æ£€æµ‹æ˜¯å¦æ˜¯æ‰‹æœºå®½åº¦ï¼ˆä¸ CSS åª’ä½“æŸ¥è¯¢ä¿æŒä¸€è‡´ï¼‰
            if (window.innerWidth <= 768) {
                // æ ¸å¿ƒï¼šå°†å®¹å™¨é«˜åº¦å¼ºåˆ¶è®¾ä¸ºâ€œå½“å‰å¯è§é«˜åº¦â€
                // è¿™æ ·é”®ç›˜å¼¹èµ·æ—¶ï¼Œå®¹å™¨å°±ä¼šå˜çŸ®ï¼Œè¾“å…¥æ¡†è‡ªç„¶å°±é¡¶ä¸Šå»äº†
                windowFrame.style.height = window.visualViewport.height + 'px';
                
                // 3. é”®ç›˜å¼¹èµ·åï¼Œé¡ºä¾¿æŠŠèŠå¤©è®°å½•æ»šåˆ°åº•éƒ¨ï¼Œé˜²æ­¢æ¶ˆæ¯è¢«æŒ¡ä½
                setTimeout(scrollToBottom, 100);
            } else {
                // ç”µè„‘ç«¯æ¢å¤é»˜è®¤ï¼ˆæˆ–è€…æ˜¯ CSS é‡Œå†™çš„é«˜åº¦ï¼‰
                windowFrame.style.height = ''; 
            }
        });

        // é’ˆå¯¹ iOS Safari çš„ç‰¹æ®Šå¤„ç†ï¼šå½“é”®ç›˜æ”¶èµ·æ—¶æ¢å¤é«˜åº¦
        window.visualViewport.addEventListener('scroll', () => {
             if (window.innerWidth <= 768) {
                 scrollToBottom();
             }
        });
    }

</script>
<script>
    // 1. ç¦æ­¢å³é”®èœå•
    document.oncontextmenu = function() {
        return false;
    };

    // 2. ç¦æ­¢é¼ æ ‡æ‹–æ‹½é€‰ä¸­æ–‡å­—
    document.onselectstart = function() {
        return false;
    };

    // 3. ç¦æ­¢ F12, Ctrl+U (æŸ¥çœ‹æºç ), Ctrl+S (ä¿å­˜), Ctrl+Shift+I (å¼€å‘è€…å·¥å…·)
    document.onkeydown = function(e) {
        // F12
        if (e.keyCode === 123) {
            return false;
        }
        // Ctrl + U (æŸ¥çœ‹æºç )
        if (e.ctrlKey && e.keyCode === 85) {
            return false;
        }
        // Ctrl + S (ä¿å­˜ç½‘é¡µ)
        if (e.ctrlKey && e.keyCode === 83) {
            return false;
        }
        // Ctrl + Shift + I (å¼€å‘è€…å·¥å…·)
        if (e.ctrlKey && e.shiftKey && e.keyCode === 73) {
            return false;
        }
    };
</script>

<script>
    (function loadExternalBrain() {
        const filePath = './new_memory.json'; // ä½ çš„æ–°è¯åº“æ–‡ä»¶å

        console.log("æ­£åœ¨å°è¯•æ¥å…¥å¤–éƒ¨ç¥ç»å…ƒ...");

        fetch(filePath)
            .then(response => {
                if (!response.ok) throw new Error("æ‰¾ä¸åˆ°è¯åº“æ–‡ä»¶");
                return response.json();
            })
            .then(newData => {
                // 1. åˆå¹¶æ•°æ®
                brain.db = brain.db.concat(newData);

                // 2. åˆ·æ–°çŠ¶æ€æ æ˜¾ç¤º (ç›´æ¥æ˜¾ç¤ºæ€»æ•°ï¼Œæ— ç‰¹æ•ˆ)
                const statusDiv = document.getElementById('db-status');
                if (statusDiv) {
                    statusDiv.innerText = `å½“å‰ç´¢å¼•æ•°é‡: ${brain.db.length}`;
                }

                console.log(`âœ… æˆåŠŸæ³¨å…¥ ${newData.length} æ¡æ–°è®°å¿†ï¼`);
            })
            .catch(err => {
                console.warn("âš ï¸ å¤–æŒ‚è¯åº“åŠ è½½å¤±è´¥:", err);
            });
    })();
</script>
</body>
</html>